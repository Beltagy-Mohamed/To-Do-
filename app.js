
// --- No-Server Static Version ---
// No Imports, No Firebase. Pure LocalStorage.

const ATHKAR_MORNING = [
    { id: 1, text: "أَعُوذُ بِاللهِ مِنْ الشَّيْطَانِ الرَّجِيمِ\nاللّهُ لاَ إِلَـهَ إِلاَّ هُوَ الْحَيُّ الْقَيُّومُ لاَ تَأْخُذُهُ سِنَةٌ وَلاَ نَوْمٌ لَّهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الأَرْضِ مَن ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلاَّ بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلاَ يُحِيطُونَ بِشَيْءٍ مِّنْ عِلْمِهِ إِلاَّ بِمَا شَاء وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالأَرْضَ وَلاَ يَؤُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ.", note: "من قالها حين يصبح أجير من الجن حتى يمسى ومن قالها حين يمسى أجير من الجن حتى يصبح.", count: 1 },
    { id: 2, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ هُوَ ٱللَّهُ أَحَدٌ، ٱللَّهُ ٱلصَّمَدُ، لَمْ يَلِدْ وَلَمْ يُولَدْ، وَلَمْ يَكُن لَّهُۥ كُفُوًا أَحَدٌۢ.", note: "من قالها حين يصبح وحين يمسى كفته من كل شىء (الإخلاص والمعوذتين).", count: 3 },
    { id: 3, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ أَعُوذُ بِرَبِّ ٱلْفَلَقِ، مِن شَرِّ مَا خَلَقَ، وَمِن شَرِّ غَاسِقٍ إِذَا وَقَبَ، وَمِن شَرِّ ٱلنَّفَّٰثَٰتِ فِى ٱلْعُقَدِ، وَمِن شَرِّ حَاسِدٍ إِذَا حَسَدَ.", note: null, count: 3 },
    { id: 4, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ أَعُوذُ بِرَبِّ ٱلنَّاسِ، مَلِكِ ٱلنَّاسِ، إِلَٰهِ ٱلنَّاسِ، مِن شَرِّ ٱلْوَسْوَاسِ ٱلْخَنَّاسِ، ٱلَّذِى يُوَسْوِسُ فِى صُدُورِ ٱلنَّاسِ، مِنَ ٱلْجِنَّةِ وَٱلنَّاسِ.", note: null, count: 3 },
    { id: 5, text: "أَصْـبَحْنا وَأَصْـبَحَ المُـلْكُ لله وَالحَمدُ لله ، لا إلهَ إلاّ اللّهُ وَحدَهُ لا شَريكَ لهُ، لهُ المُـلكُ ولهُ الحَمْـد، وهُوَ على كلّ شَيءٍ قدير ، رَبِّ أسْـأَلُـكَ خَـيرَ ما في هـذا اليوم وَخَـيرَ ما بَعْـدَه ، وَأَعـوذُ بِكَ مِنْ شَـرِّ ما في هـذا اليوم وَشَرِّ ما بَعْـدَه، رَبِّ أَعـوذُبِكَ مِنَ الْكَسَـلِ وَسـوءِ الْكِـبَر ، رَبِّ أَعـوذُ بِكَ مِنْ عَـذابٍ في النّـارِ وَعَـذابٍ في القَـبْر.", note: null, count: 1 },
    { id: 6, text: "اللّهـمَّ أَنْتَ رَبِّـي لا إلهَ إلاّ أَنْتَ ، خَلَقْتَنـي وَأَنا عَبْـدُك ، وَأَنا عَلـى عَهْـدِكَ وَوَعْـدِكَ ما اسْتَـطَعْـت ، أَعـوذُبِكَ مِنْ شَـرِّ ما صَنَـعْت ، أَبـوءُ لَـكَ بِنِعْـمَتِـكَ عَلَـيَّ وَأَبـوءُ بِذَنْـبي فَاغْفـِرْ لي فَإِنَّـهُ لا يَغْـفِرُ الذُّنـوبَ إِلاّ أَنْتَ .", note: "من قالها موقنا بها حين يمسى ومات من ليلته دخل الجنة وكذلك حين يصبح.", count: 1 },
    { id: 7, text: "رَضيـتُ بِاللهِ رَبَّـاً وَبِالإسْلامِ ديـناً وَبِمُحَـمَّدٍ صلى الله عليه وسلم نَبِيّـاً.", note: "من قالها حين يصبح وحين يمسى كان حقا على الله أن يرضيه يوم القيامة.", count: 3 },
    { id: 8, text: "اللّهُـمَّ إِنِّـي أَصْبَـحْتُ أُشْـهِدُك ، وَأُشْـهِدُ حَمَلَـةَ عَـرْشِـك ، وَمَلَائِكَتَكَ ، وَجَمـيعَ خَلْـقِك ، أَنَّـكَ أَنْـتَ اللهُ لا إلهَ إلاّ أَنْـتَ وَحْـدَكَ لا شَريكَ لَـك ، وَأَنَّ ُ مُحَمّـداً عَبْـدُكَ وَرَسـولُـك.", note: "من قالها أعتقه الله من النار.", count: 4 },
    { id: 9, text: "اللّهُـمَّ ما أَصْبَـَحَ بي مِـنْ نِعْـمَةٍ أَو بِأَحَـدٍ مِـنْ خَلْـقِك ، فَمِـنْكَ وَحْـدَكَ لا شريكَ لَـك ، فَلَـكَ الْحَمْـدُ وَلَـكَ الشُّكْـر.", note: "من قالها حين يصبح أدى شكر يومه.", count: 1 },
    { id: 10, text: "حَسْبِـيَ اللّهُ لا إلهَ إلاّ هُوَ عَلَـيهِ تَوَكَّـلتُ وَهُوَ رَبُّ العَرْشِ العَظـيم.", note: "من قالها كفاه الله ما أهمه من أمر الدنيا والأخرة.", count: 7 },
    { id: 11, text: "بِسـمِ اللهِ الذي لا يَضُـرُّ مَعَ اسمِـهِ شَيءٌ في الأرْضِ وَلا في السّمـاءِ وَهـوَ السّمـيعُ العَلـيم.", note: "لم يضره من الله شيء.", count: 3 },
    { id: 12, text: "اللّهُـمَّ بِكَ أَصْـبَحْنا وَبِكَ أَمْسَـينا ، وَبِكَ نَحْـيا وَبِكَ نَمُـوتُ وَإِلَـيْكَ النُّـشُور.", note: null, count: 1 },
    { id: 13, text: "أَصْبَـحْـنا عَلَى فِطْرَةِ الإسْلاَمِ، وَعَلَى كَلِمَةِ الإِخْلاَصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إبْرَاهِيمَ حَنِيفاً مُسْلِماً وَمَا كَانَ مِنَ المُشْرِكِينَ.", note: null, count: 1 },
    { id: 14, text: "سُبْحـانَ اللهِ وَبِحَمْـدِهِ عَدَدَ خَلْـقِه ، وَرِضـا نَفْسِـه ، وَزِنَـةَ عَـرْشِـه ، وَمِـدادَ كَلِمـاتِـه.", note: null, count: 3 },
    { id: 15, text: "اللّهُـمَّ عافِـني في بَدَنـي ، اللّهُـمَّ عافِـني في سَمْـعي ، اللّهُـمَّ عافِـني في بَصَـري ، لا إلهَ إلاّ أَنْـتَ.", note: null, count: 3 },
    { id: 16, text: "اللّهُـمَّ إِنّـي أَعـوذُ بِكَ مِنَ الْكُـفر ، وَالفَـقْر ، وَأَعـوذُ بِكَ مِنْ عَذابِ القَـبْر ، لا إلهَ إلاّ أَنْـتَ.", note: null, count: 3 },
    { id: 17, text: "اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في الدُّنْـيا وَالآخِـرَة ، اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في ديني وَدُنْـيايَ وَأهْـلي وَمالـي ، اللّهُـمَّ اسْتُـرْ عـوْراتي وَآمِـنْ رَوْعاتـي ، اللّهُـمَّ احْفَظْـني مِن بَـينِ يَدَيَّ وَمِن خَلْفـي وَعَن يَمـيني وَعَن شِمـالي ، وَمِن فَوْقـي ، وَأَعـوذُ بِعَظَمَـتِكَ أَن أُغْـتالَ مِن تَحْتـي.", note: null, count: 1 },
    { id: 18, text: "يَا حَيُّ يَا قيُّومُ بِرَحْمَتِكَ أسْتَغِيثُ أصْلِحْ لِي شَأنِي كُلَّهُ وَلاَ تَكِلْنِي إلَى نَفْسِي طَـرْفَةَ عَيْنٍ.", note: null, count: 3 },
    { id: 19, text: "أَصْبَـحْـنا وَأَصْبَـحْ المُـلكُ للهِ رَبِّ العـالَمـين ، اللّهُـمَّ إِنِّـي أسْـأَلُـكَ خَـيْرَ هـذا الـيَوْم ، فَـتْحَهُ ، وَنَصْـرَهُ ، وَنـورَهُ وَبَـرَكَتَـهُ ، وَهُـداهُ ، وَأَعـوذُ بِـكَ مِـنْ شَـرِّ ما فـيهِ وَشَـرِّ ما بَعْـدَه.", note: null, count: 1 },
    { id: 20, text: "اللّهُـمَّ عالِـمَ الغَـيْبِ وَالشّـهادَةِ فاطِـرَ السّماواتِ وَالأرْضِ رَبَّ كـلِّ شَـيءٍ وَمَليـكَه ، أَشْهَـدُ أَنْ لا إِلـهَ إِلاّ أَنْت ، أَعـوذُ بِكَ مِن شَـرِّ نَفْسـي وَمِن شَـرِّ الشَّيْـطانِ وَشِرْكِهِ ، وَأَنْ أَقْتَـرِفَ عَلـى نَفْسـي سوءاً أَوْ أَجُـرَّهُ إِلـى مُسْـلِم.", note: null, count: 1 },
    { id: 21, text: "أَعـوذُ بِكَلِمـاتِ اللّهِ التّـامّـاتِ مِنْ شَـرِّ ما خَلَـق.", note: null, count: 3 },
    { id: 22, text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ على نَبِيِّنَا مُحمَّد.", note: "من صلى على حين يصبح وحين يمسى ادركته شفاعتى يوم القيامة.", count: 10 },
    { id: 23, text: "اللَّهُمَّ إِنَّا نَعُوذُ بِكَ مِنْ أَنْ نُشْرِكَ بِكَ شَيْئًا نَعْلَمُهُ ، وَنَسْتَغْفِرُكَ لِمَا لَا نَعْلَمُهُ.", note: null, count: 3 },
    { id: 24, text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنْ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنْ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ، وَقَهْرِ الرِّجَالِ.", note: null, count: 3 },
    { id: 25, text: "أسْتَغْفِرُ اللهَ العَظِيمَ الَّذِي لاَ إلَهَ إلاَّ هُوَ، الحَيُّ القَيُّومُ، وَأتُوبُ إلَيهِ.", note: null, count: 3 },
    { id: 26, text: "يَا رَبِّ , لَكَ الْحَمْدُ كَمَا يَنْبَغِي لِجَلَالِ وَجْهِكَ , وَلِعَظِيمِ سُلْطَانِكَ.", note: null, count: 3 },
    { id: 27, text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ عِلْمًا نَافِعًا، وَرِزْقًا طَيِّبًا، وَعَمَلًا مُتَقَبَّلًا.", note: null, count: 1 },
    { id: 28, text: "اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ ، عَلَيْكَ تَوَكَّلْتُ ، وَأَنْتَ رَبُّ الْعَرْشِ الْعَظِيمِ , مَا شَاءَ اللَّهُ كَانَ ، وَمَا لَمْ يَشَأْ لَمْ يَكُنْ ، وَلا حَوْلَ وَلا قُوَّةَ إِلا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ , أَعْلَمُ أَنَّ اللَّهَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ ، وَأَنَّ اللَّهَ قَدْ أَحَاطَ بِكُلِّ شَيْءٍ عِلْمًا , اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي ، وَمِنْ شَرِّ كُلِّ دَابَّةٍ أَنْتَ آخِذٌ بِنَاصِيَتِهَا ، إِنَّ رَبِّي عَلَى صِرَاطٍ مُسْتَقِيمٍ.", note: "ذكر طيب.", count: 1 },
    { id: 29, text: "لَا إلَه إلّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءِ قَدِيرِ.", note: "كانت له عدل عشر رقاب، وكتبت له مئة حسنة، ومحيت عنه مئة سيئة، وكانت له حرزا من الشيطان.", count: 100 },
    { id: 30, text: "سُبْحـانَ اللهِ وَبِحَمْـدِهِ.", note: "حُطَّتْ خَطَايَاهُ وَإِنْ كَانَتْ مِثْلَ زَبَدِ الْبَحْرِ. لَمْ يَأْتِ أَحَدٌ يَوْمَ الْقِيَامَةِ بِأَفْضَلَ مِمَّا جَاءَ بِهِ إِلَّا أَحَدٌ قَالَ مِثْلَ مَا قَالَ أَوْ زَادَ عَلَيْهِ.", count: 100 },
    { id: 31, text: "أسْتَغْفِرُ اللهَ وَأتُوبُ إلَيْهِ", note: "مائة حسنة، ومُحيت عنه مائة سيئة، وكانت له حرزاً من الشيطان حتى يمسى.", count: 100 }
];

const ATHKAR_EVENING = [
    { id: 101, text: "أَعُوذُ بِاللهِ مِنْ الشَّيْطَانِ الرَّجِيمِ\nاللّهُ لاَ إِلَـهَ إِلاَّ هُوَ الْحَيُّ الْقَيُّومُ لاَ تَأْخُذُهُ سِنَةٌ وَلاَ نَوْمٌ لَّهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الأَرْضِ مَن ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلاَّ بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلاَ يُحِيطُونَ بِشَيْءٍ مِّنْ عِلْمِهِ إِلاَّ بِمَا شَاء وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالأَرْضَ وَلاَ يَؤُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ.", note: "من قالها حين يصبح أجير من الجن حتى يمسى ومن قالها حين يمسى أجير من الجن حتى يصبح.", count: 1 },
    { id: 102, text: "أَعُوذُ بِاللهِ مِنْ الشَّيْطَانِ الرَّجِيمِ\nآمَنَ الرَّسُولُ بِمَا أُنْزِلَ إِلَيْهِ مِنْ رَبِّهِ وَالْمُؤْمِنُونَ ۚ كُلٌّ آمَنَ بِاللَّهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِنْ رُسُلِهِ ۚ وَقَالُوا سَمِعْنَا وَأَطَعْنَا ۖ غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ. لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ رَبَّنَا لَا تُؤَاخِذْنَا إِنْ نَّسِينَآ أَوْ أَخْطَأْنَا رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِنْ قَبْلِنَا رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا أَنْتَ مَوْلَانَا فَانْصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ.", note: "من قرأ آيتين من آخر سورة البقرة في ليلة كفتاه.", count: 1 },
    { id: 103, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ هُوَ ٱللَّهُ أَحَدٌ، ٱللَّهُ ٱلصَّمَدُ، لَمْ يَلِدْ وَلَمْ يُولَدْ، وَلَمْ يَكُن لَّهُۥ كُفُوًا أَحَدٌۢ.", note: "من قالها حين يصبح وحين يمسى كفته من كل شىء (الإخلاص والمعوذتين).", count: 3 },
    { id: 104, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ أَعُوذُ بِرَبِّ ٱلْفَلَقِ، مِن شَرِّ مَا خَلَقَ، وَمِن شَرِّ غَاسِقٍ إِذَا وَقَبَ، وَمِن شَرِّ ٱلنَّفَّٰثَٰتِ فِى ٱلْعُقَدِ، وَمِن شَرِّ حَاسِدٍ إِذَا حَسَدَ.", note: null, count: 3 },
    { id: 105, text: "بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم\nقُلْ أَعُوذُ بِرَبِّ ٱلنَّاسِ، مَلِكِ ٱلنَّاسِ، إِلَٰهِ ٱلنَّاسِ، مِن شَرِّ ٱلْوَسْوَاسِ ٱلْخَنَّاسِ، ٱلَّذِى يُوَسْوِسُ فِى صُدُورِ ٱلنَّاسِ، مِنَ ٱلْجِنَّةِ وَٱلنَّاسِ.", note: null, count: 3 },
    { id: 106, text: "أَمْسَيْـنا وَأَمْسـى المـلكُ لله وَالحَمدُ لله ، لا إلهَ إلاّ اللّهُ وَحدَهُ لا شَريكَ لهُ، لهُ المُـلكُ ولهُ الحَمْـد، وهُوَ على كلّ شَيءٍ قدير ، رَبِّ أسْـأَلُـكَ خَـيرَ ما في هـذهِ اللَّـيْلَةِ وَخَـيرَ ما بَعْـدَهـا ، وَأَعـوذُ بِكَ مِنْ شَـرِّ ما في هـذهِ اللَّـيْلةِ وَشَرِّ ما بَعْـدَهـا ، رَبِّ أَعـوذُبِكَ مِنَ الْكَسَـلِ وَسـوءِ الْكِـبَر ، رَبِّ أَعـوذُ بِكَ مِنْ عَـذابٍ في النّـارِ وَعَـذابٍ في القَـبْر.", note: null, count: 1 },
    { id: 107, text: "اللّهـمَّ أَنْتَ رَبِّـي لا إلهَ إلاّ أَنْتَ ، خَلَقْتَنـي وَأَنا عَبْـدُك ، وَأَنا عَلـى عَهْـدِكَ وَوَعْـدِكَ ما اسْتَـطَعْـت ، أَعـوذُبِكَ مِنْ شَـرِّ ما صَنَـعْت ، أَبـوءُ لَـكَ بِنِعْـمَتِـكَ عَلَـيَّ وَأَبـوءُ بِذَنْـبي فَاغْفـِرْ لي فَإِنَّـهُ لا يَغْـفِرُ الذُّنـوبَ إِلاّ أَنْتَ .", note: "من قالها موقنا بها حين يمسى ومات من ليلته دخل الجنة وكذلك حين يصبح.", count: 1 },
    { id: 108, text: "رَضيـتُ بِاللهِ رَبَّـاً وَبِالإسْلامِ ديـناً وَبِمُحَـمَّدٍ صلى الله عليه وسلم نَبِيّـاً.", note: "من قالها حين يصبح وحين يمسى كان حقا على الله أن يرضيه يوم القيامة.", count: 3 },
    { id: 109, text: "اللّهُـمَّ إِنِّـي أَمسيتُ أُشْـهِدُك ، وَأُشْـهِدُ حَمَلَـةَ عَـرْشِـك ، وَمَلَائِكَتَكَ ، وَجَمـيعَ خَلْـقِك ، أَنَّـكَ أَنْـتَ اللهُ لا إلهَ إلاّ أَنْـتَ وَحْـدَكَ لا شَريكَ لَـك ، وَأَنَّ ُ مُحَمّـداً عَبْـدُكَ وَرَسـولُـك.", note: "من قالها أعتقه الله من النار.", count: 4 },
    { id: 110, text: "اللّهُـمَّ ما أَمسى بي مِـنْ نِعْـمَةٍ أَو بِأَحَـدٍ مِـنْ خَلْـقِك ، فَمِـنْكَ وَحْـدَكَ لا شريكَ لَـك ، فَلَـكَ الْحَمْـدُ وَلَـكَ الشُّكْـر.", note: "من قالها حين يمسى أدى شكر يومه.", count: 1 },
    { id: 111, text: "حَسْبِـيَ اللّهُ لا إلهَ إلاّ هُوَ عَلَـيهِ تَوَكَّـلتُ وَهُوَ رَبُّ العَرْشِ العَظـيم.", note: "من قالها كفاه الله ما أهمه من أمر الدنيا والأخرة.", count: 7 },
    { id: 112, text: "بِسـمِ اللهِ الذي لا يَضُـرُّ مَعَ اسمِـهِ شَيءٌ في الأرْضِ وَلا في السّمـاءِ وَهـوَ السّمـيعُ العَلـيم.", note: "لم يضره من الله شيء.", count: 3 },
    { id: 113, text: "اللّهُـمَّ بِكَ أَمْسَـينا وَبِكَ أَصْـبَحْنا، وَبِكَ نَحْـيا وَبِكَ نَمُـوتُ وَإِلَـيْكَ الْمَصِيرُ.", note: null, count: 1 },
    { id: 114, text: "أَمْسَيْنَا عَلَى فِطْرَةِ الإسْلاَمِ، وَعَلَى كَلِمَةِ الإِخْلاَصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إبْرَاهِيمَ حَنِيفاً مُسْلِماً وَمَا كَانَ مِنَ المُشْرِكِينَ.", note: null, count: 1 },
    { id: 115, text: "سُبْحـانَ اللهِ وَبِحَمْـدِهِ عَدَدَ خَلْـقِه ، وَرِضـا نَفْسِـه ، وَزِنَـةَ عَـرْشِـه ، وَمِـدادَ كَلِمـاتِـه.", note: null, count: 3 },
    { id: 116, text: "اللّهُـمَّ عافِـني في بَدَنـي ، اللّهُـمَّ عافِـني في سَمْـعي ، اللّهُـمَّ عافِـني في بَصَـري ، لا إلهَ إلاّ أَنْـتَ.", note: null, count: 3 },
    { id: 117, text: "اللّهُـمَّ إِنّـي أَعـوذُ بِكَ مِنَ الْكُـفر ، وَالفَـقْر ، وَأَعـوذُ بِكَ مِنْ عَذابِ القَـبْر ، لا إلهَ إلاّ أَنْـتَ.", note: null, count: 3 },
    { id: 118, text: "اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في الدُّنْـيا وَالآخِـرَة ، اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في ديني وَدُنْـيايَ وَأهْـلي وَمالـي ، اللّهُـمَّ اسْتُـرْ عـوْراتي وَآمِـنْ رَوْعاتـي ، اللّهُـمَّ احْفَظْـني مِن بَـينِ يَدَيَّ وَمِن خَلْفـي وَعَن يَمـيني وَعَن شِمـالي ، وَمِن فَوْقـي ، وَأَعـوذُ بِعَظَمَـتِكَ أَن أُغْـتالَ مِن تَحْتـي.", note: null, count: 1 },
    { id: 119, text: "يَا حَيُّ يَا قيُّومُ بِرَحْمَتِكَ أسْتَغِيثُ أصْلِحْ لِي شَأنِي كُلَّهُ وَلاَ تَكِلْنِي إلَى نَفْسِي طَـرْفَةَ عَيْنٍ.", note: null, count: 3 },
    { id: 120, text: "أَمْسَيْنا وَأَمْسَى الْمُلْكُ للهِ رَبِّ الْعَالَمَيْنِ، اللَّهُمَّ إِنَّي أسْأَلُكَ خَيْرَ هَذَه اللَّيْلَةِ فَتْحَهَا ونَصْرَهَا، ونُوْرَهَا وبَرَكَتهَا، وَهُدَاهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فيهِا وَشَرَّ مَا بَعْدَهَا.", note: null, count: 1 },
    { id: 121, text: "اللّهُـمَّ عالِـمَ الغَـيْبِ وَالشّـهادَةِ فاطِـرَ السّماواتِ وَالأرْضِ رَبَّ كـلِّ شَـيءٍ وَمَليـكَه ، أَشْهَـدُ أَنْ لا إِلـهَ إِلاّ أَنْت ، أَعـوذُ بِكَ مِن شَـرِّ نَفْسـي وَمِن شَـرِّ الشَّيْـطانِ وَشِرْكِهِ ، وَأَنْ أَقْتَـرِفَ عَلـى نَفْسـي سوءاً أَوْ أَجُـرَّهُ إِلـى مُسْـلِم.", note: null, count: 1 },
    { id: 122, text: "أَعـوذُ بِكَلِمـاتِ اللّهِ التّـامّـاتِ مِنْ شَـرِّ ما خَلَـق.", note: null, count: 3 },
    { id: 123, text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ على نَبِيِّنَا مُحمَّد.", note: "من صلى على حين يصبح وحين يمسى ادركته شفاعتى يوم القيامة.", count: 10 },
    { id: 124, text: "اللَّهُمَّ إِنَّا نَعُوذُ بِكَ مِنْ أَنْ نُشْرِكَ بِكَ شَيْئًا نَعْلَمُهُ ، وَنَسْتَغْفِرُكَ لِمَا لَا نَعْلَمُهُ.", note: null, count: 3 },
    { id: 125, text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنْ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنْ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ، وَقَهْرِ الرِّجَالِ.", note: null, count: 3 },
    { id: 126, text: "أسْتَغْفِرُ اللهَ العَظِيمَ الَّذِي لاَ إلَهَ إلاَّ هُوَ، الحَيُّ القَيُّومُ، وَأتُوبُ إلَيهِ.", note: null, count: 3 },
    { id: 127, text: "يَا رَبِّ , لَكَ الْحَمْدُ كَمَا يَنْبَغِي لِجَلَالِ وَجْهِكَ , وَلِعَظِيمِ سُلْطَانِكَ.", note: null, count: 3 },
    { id: 128, text: "لَا إلَه إلّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءِ قَدِيرِ.", note: "كانت له عدل عشر رقاب، وكتبت له مئة حسنة، ومحيت عنه مئة سيئة، وكانت له حرزا من الشيطان.", count: 100 },
    { id: 129, text: "اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ ، عَلَيْكَ تَوَكَّلْتُ ، وَأَنْتَ رَبُّ الْعَرْشِ الْعَظِيمِ , مَا شَاءَ اللَّهُ كَانَ ، وَمَا لَمْ يَشَأْ لَمْ يَكُنْ ، وَلا حَوْلَ وَلا قُوَّةَ إِلا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ , أَعْلَمُ أَنَّ اللَّهَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ ، وَأَنَّ اللَّهَ قَدْ أَحَاطَ بِكُلِّ شَيْءٍ عِلْمًا , اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي ، وَمِنْ شَرِّ كُلِّ دَابَّةٍ أَنْتَ آخِذٌ بِنَاصِيَتِهَا ، إِنَّ رَبِّي عَلَى صِرَاطٍ مُسْتَقِيمٍ.", note: "ذكر طيب.", count: 1 },
    { id: 130, text: "سُبْحـانَ اللهِ وَبِحَمْـدِهِ.", note: "حُطَّتْ خَطَايَاهُ وَإِنْ كَانَتْ مِثْلَ زَبَدِ الْبَحْرِ. لَمْ يَأْتِ أَحَدٌ يَوْمَ الْقِيَامَةِ بِأَفْضَلَ مِمَّا جَاءَ بِهِ إِلَّا أَحَدٌ قَالَ مِثْلَ مَا قَالَ أَوْ زَادَ عَلَيْهِ.", count: 100 }
];

const TASBIH_DATA = [
    { id: 201, text: "سُبْحَانَ اللَّهِ", note: "يكتب له ألف حسنة أو يحط عنه ألف خطيئة.", count: 100 },
    { id: 202, text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ", note: "حُطَّتْ خَطَايَاهُ وَإِنْ كَانَتْ مِثْلَ زَبَدِ الْبَحْرِ.", count: 100 },
    { id: 203, text: "سُبْحَانَ اللَّهِ وَالْحَمْدُ لِلَّهِ", note: "تَمْلَآَنِ مَا بَيْنَ السَّمَاوَاتِ وَالْأَرْضِ.", count: 100 },
    { id: 204, text: "سُبْحَانَ اللهِ العَظِيمِ وَبِحَمْدِهِ", note: "غرست له نخلة في الجنة.", count: 100 },
    { id: 205, text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ ، سُبْحَانَ اللَّهِ الْعَظِيمِ", note: "ثقيلتان في الميزان حبيبتان إلى الرحمن.", count: 100 },
    { id: 206, text: "لَا إلَه إلّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلُّ شَيْءِ قَدِيرِ.", note: "كانت له عدل عشر رقاب، وكتبت له مئة حسنة.", count: 100 },
    { id: 207, text: "الْحَمْدُ للّهِ رَبِّ الْعَالَمِينَ", note: "تملأ ميزان العبد بالحسنات.", count: 100 },
    { id: 208, text: "لا حَوْلَ وَلا قُوَّةَ إِلا بِاللَّهِ", note: "كنز من كنوز الجنة.", count: 100 },
    { id: 209, text: "الْلَّهُم صَلِّ وَسَلِم وَبَارِك عَلَى سَيِّدِنَا مُحَمَّد", note: "من صلى علي حين يصبح وحين يمسى ادركته شفاعتى يوم القيامة.", count: 100 },
    { id: 210, text: "أستغفر الله", note: "لفعل الرسول صلى الله عليه وسلم.", count: 100 },
    { id: 211, text: "سُبْحَانَ الْلَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا الْلَّهُ، وَالْلَّهُ أَكْبَرُ", note: "أنهن أحب الكلام الى الله، ومكفرات للذنوب.", count: 100 },
    { id: 212, text: "لَا إِلَهَ إِلَّا اللَّهُ", note: "أفضل الذكر لا إله إلاّ الله.", count: 100 },
    { id: 213, text: "الْلَّهُ أَكْبَرُ", note: "من قال الله أكبر كتبت له عشرون حسنة.", count: 100 },
    { id: 214, text: "سُبْحَانَ اللَّهِ ، وَالْحَمْدُ لِلَّهِ ، وَلا إِلَهَ إِلا اللَّهُ ، وَاللَّهُ أَكْبَرُ ، اللَّهُمَّ اغْفِرْ لِي ، اللَّهُمَّ ارْحَمْنِي ، اللَّهُمَّ ارْزُقْنِي.", note: "خير الدنيا والآخرة", count: 100 },
    { id: 215, text: "الْحَمْدُ لِلَّهِ حَمْدًا كَثِيرًا طَيِّبًا مُبَارَكًا فِيهِ.", note: "لَقَدْ رَأَيْتُ اثْنَيْ عَشَرَ مَلَكًا يَبْتَدِرُونَهَا.", count: 100 },
    { id: 216, text: "اللَّهُ أَكْبَرُ كَبِيرًا ، وَالْحَمْدُ لِلَّهِ كَثِيرًا ، وَسُبْحَانَ اللَّهِ بُكْرَةً وَأَصِيلاً.", note: "عَجِبْتُ لَهَا ، فُتِحَتْ لَهَا أَبْوَابُ السَّمَاءِ.", count: 100 },
    { id: 217, text: "اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ ...", note: "في كل مره تحط عنه عشر خطايا.", count: 100 }
];

const KAHF_TEXT = `ٱلۡحَمۡدُ لِلَّهِ ٱلَّذِيٓ أَنزَلَ عَلَىٰ عَبۡدِهِ ٱلۡكِتَٰبَ وَلَمۡ يَجۡعَل لَّهُۥ عِوَجَاۜ (1) قَيِّمٗا لِّيُنذِرَ بَأۡسٗا شَدِيدٗا مِّن لَّدُنۡهُ وَيُبَشِّرَ ٱلۡمُؤۡمِنِينَ ٱلَّذِينَ يَعۡمَلُونَ ٱلصَّٰلِحَٰتِ أَنَّ لَهُمۡ أَجۡرًا حَسَنٗا (2) مَّٰكِثِينَ فِيهِ أَبَدٗا (3) وَيُنذِرَ ٱلَّذِينَ قَالُواْ ٱتَّخَذَ ٱللَّهُ وَلَدٗا (4) مَّا لَهُم بِهِۦ مِنۡ عِلۡمٖ وَلَا لِأٓبَآئِهِمۡۚ كَبُرَتۡ كَلِمَةٗ تَخۡرُجُ مِنۡ أَفۡوَٰهِهِمۡۚ إِن يَقُولُونَ إِلَّا كَذِبٗا (5) فَلَعَلَّكَ بَٰخِعٞ نَّفۡسَكَ عَلَىٰٓ ءَاثَٰرِهِمۡ إِن لَّمۡ يُؤۡمِنُواْ بِهَٰذَا ٱلۡحَدِيثِ أَسَفًا (6) إِنَّا جَعَلۡنَا مَا عَلَى ٱلۡأَرۡضِ زِينَةٗ لَّهَا لِنَبۡلُوَهُمۡ أَيُّهُمۡ أَحۡسَنُ عَمَلٗا (7) وَإِنَّا لَجَٰعِلُونَ مَا عَلَيۡهَا صَعِيدٗا جُرُزًا (8) أَمۡ حَسِبۡتَ أَنَّ أَصۡحَٰبَ ٱلۡكَهۡفِ وَٱلرَّقِيمِ كَانُواْ مِنۡ ءَايَٰتِنَا عَجَبًا (9) إِذۡ أَوَى ٱلۡفِتۡيَةُ إِلَى ٱلۡكَهۡفِ فَقَالُواْ رَبَّنَآ ءَاتِنَا مِن لَّدُنكَ رَحۡمَةٗ وَهَيِّئۡ لَنَا مِنۡ أَمۡرِنَا رَشَدٗا (10) فَضَرَبۡنَا عَلَىٰٓ ءَاذَانِهِمۡ فِي ٱلۡكَهۡفِ سِنِينَ عَدَدٗا (11) ثُمَّ بَعَثۡنَٰهُمۡ لِنَعۡلَمَ أَيُّ ٱلۡحِزۡبَيۡنِ أَحۡصَىٰ لِمَا لَبِثُوٓاْ أَمَدٗا (12) نَّحۡنُ نَقُصُّ عَلَيۡكَ نَبَأَهُم بِٱلۡحَقِّۚ إِنَّهُمۡ فِتۡيَةٌ ءَامَنُواْ بِرَبِّهِمۡ وَزِدۡنَٰهُمۡ هُدٗى (13) وَرَبَطۡنَا عَلَىٰ قُلُوبِهِمۡ إِذۡ قَامُواْ فَقَالُواْ رَبُّنَا رَبُّ ٱلسَّمَٰوَٰتِ وَٱلۡأَرۡضِ لَن نَّدۡعُوَاْ مِن دُونِهِۦٓ إِلَٰهٗاۖ لَّقَدۡ قُلۡنَآ إِذٗا شَطَطًا (14) هَٰٓؤُلَآءِ قَوۡمُنَا ٱتَّخَذُواْ مِن دُونِهِۦٓ ءَالِهَةٗۖ لَّوۡلَا يَأۡتُونَ عَلَيۡهِم بِسُلۡطَٰنِۭ بَيِّنٖۖ فَمَنۡ أَظۡلَمُ مِمَّنِ ٱفۡتَرَىٰ عَلَى ٱللَّهِ كَذِبٗا (15) وَإِذِ ٱعۡتَزَلۡتُمُوهُمۡ وَمَا يَعۡبُدُونَ إِلَّا ٱللَّهَ فَأۡوُۥٓاْ إِلَى ٱلۡكَهۡفِ يَنشُرۡ لَكُمۡ رَبُّكُم مِّن رَّحۡمَتِهِۦ وَيُهَيِّئۡ لَكُم مِّنۡ أَمۡرِكُم مِّرۡفَقٗا (16) ۞وَتَرَى ٱلشَّمۡسَ إِذَا طَلَعَت تَّزَٰوَرُ عَن كَهۡفِهِمۡ ذَاتَ ٱلۡيَمِينِ وَإِذَا غَرَبَت تَّقۡرِضُهُمۡ ذَاتَ ٱلشِّمَالِ وَهُمۡ فِي فَجۡوَةٖ مِّنۡهُۚ ذَٰلِكَ مِنۡ ءَايَٰتِ ٱللَّهِۗ مَن يَهۡدِ ٱللَّهُ فَهُوَ ٱلۡمُهۡتَدِۖ وَمَن يُضۡلِلۡ فَلَن تَجِدَ لَهُۥ وَلِيّٗا مُّرۡشِدٗا (17) وَتَحۡسَبُهُمۡ أَيۡقَاظٗا وَهُمۡ رُقُودٞۚ وَنُقَلِّبُهُمۡ ذَاتَ ٱلۡيَمِينِ وَذَاتَ ٱلشِّمَالِۖ وَكَلۡبُهُم بَٰسِطٞ ذِرَاعَيۡهِ بِٱلۡوَصِيدِۚ لَوِ ٱطَّلَعۡتَ عَلَيۡهِمۡ لَوَلَّيۡتَ مِنۡهُمۡ فِرَارٗا وَلَمُلِئۡتَ مِنۡهُمۡ رُعۡبٗا (18) وَكَذَٰلِكَ بَعَثۡنَٰهُمۡ لِيَتَسَآءَلُواْ بَيۡنَهُمۡۚ قَالَ قَآئِلٞ مِّنۡهُمۡ كَمۡ لَبِثۡتُمۡۖ قَالُواْ لَبِثۡنَا يَوۡمًا أَوۡ بَعۡضَ يَوۡمٖۚ قَالُواْ رَبُّكُمۡ أَعۡلَمُ بِمَا لَبِثۡتُمۡ فَٱبۡعَثُوٓاْ أَحَدَكُم بِوَرِقِكُمۡ هَٰذِهِۦٓ إِلَى ٱلۡمَدِينَةِ فَلۡيَنظُرۡ أَيُّهَآ أَزۡكَىٰ طَعَامٗا فَلۡيَأۡتِكُم بِرِزۡقٖ مِّنۡهُ وَلۡيَتَلَطَّفۡ وَلَا يُشۡعِرَنَّ بِكُمۡ أَحَدًا (19) إِنَّهُمۡ إِن يَظۡهَرُواْ عَلَيۡكُمۡ يَرۡجُمُوكُمۡ أَوۡ يُعِيدُوكُمۡ فِي مِلَّتِهِمۡ وَلَن تُفۡلِحُوٓاْ إِذًا أَبَدٗا (20) وَكَذَٰلِكَ أَعۡثَرۡنَا عَلَيۡهِمۡ لِيَعۡلَمُوٓاْ أَنَّ وَعۡدَ ٱللَّهِ حَقّٞ وَأَنَّ ٱلسَّاعَةَ لَا رَيۡبَ فِيهَآ إِذۡ يَتَنَٰزَعُونَ بَيۡنَهُمۡ أَمۡرَهُمۡۖ فَقَالُواْ ٱبۡنُواْ عَلَيۡهِم بُنۡيَٰنٗاۖ رَّبُّهُمۡ أَعۡلَمُ بِهِمۡۚ قَالَ ٱلَّذِينَ غَلَبُواْ عَلَىٰٓ أَمۡرِهِمۡ لَنَتَّخِذَنَّ عَلَيۡهِم مَّسۡجِدٗا (21) سَيَقُولُونَ ثَلَٰثَةٞ رَّابِعُهُمۡ كَلۡبُهُمۡ وَيَقُولُونَ خَمۡسَةٞ سَادِسُهُمۡ كَلۡبُهُمۡ رَجۡمَۢا بِٱلۡغَيۡبِۖ وَيَقُولُونَ سَبۡعَةٞ وَثَامِنُهُمۡ كَلۡبُهُمۡۚ قُل رَّبِّيٓ أَعۡلَمُ بِعِدَّتِهِم مَّا يَعۡلَمُهُمۡ إِلَّا قَلِيلٞۗ فَلَا تُمَارِ فِيهِمۡ إِلَّا مِرَآءٗ ظَٰهِرٗا وَلَا تَسۡتَفۡتِ فِيهِم مِّنۡهُمۡ أَحَدٗا (22) وَلَا تَقُولَنَّ لِشَاْيۡءٍ إِنِّي فَاعِلٞ ذَٰلِكَ غَدًا (23) إِلَّآ أَن يَشَآءَ ٱللَّهُۚ وَٱذۡكُر رَّبَّكَ إِذَا نَسِيتَ وَقُلۡ عَسَىٰٓ أَن يَهۡدِيَنِ رَبِّي لِأَقۡرَبَ مِنۡ هَٰذَا رَشَدٗا (24) وَلَبِثُواْ فِي كَهۡفِهِمۡ ثَلَٰثَ مِاْئَةٖ سِنِينَ وَٱزۡدَادُواْ تِسۡعٗا (25) قُلِ ٱللَّهُ أَعۡلَمُ بِمَا لَبِثُواْۖ لَهُۥ غَيۡبُ ٱلسَّمَٰوَٰتِ وَٱلۡأَرۡضِۖ أَبۡصِرۡ بِهِۦ وَأَسۡمِعۡۚ مَا لَهُم مِّن دُونِهِۦ مِن وَلِيّٖ وَلَا يُشۡرِكُ فِي حُكۡمِهِۦٓ أَحَدٗا (26) وَٱتۡلُ مَآ أُوحِيَ إِلَيۡكَ مِن كِتَابِ رَبِّكَۖ لَا مُبَدِّلَ لِكَلِمَٰتِهِۦ وَلَن تَجِدَ مِن دُونِهِۦ مُلۡتَحَدٗا (27) وَٱصۡبِرۡ نَفۡسَكَ مَعَ ٱلَّذِينَ يَدۡعُونَ رَبَّهُم بِٱلۡغَدَوٰةِ وَٱلۡعَشِيِّ يُرِيدُونَ وَجۡهَهُۥۖ وَلَا تَعۡدُ عَيۡنَاكَ عَنۡهُمۡ تُرِيدُ زِينَةَ ٱلۡحَيَوٰةِ ٱلدُّنۡيَاۖ وَلَا تُطِعۡ مَنۡ أَغۡفَلۡنَا قَلۡبَهُۥ عَن ذِكۡرِنَا وَٱتَّبَعَ هَوَىٰهُ وَكَانَ أَمۡرُهُۥ فُرُطٗا (28) وَقُلِ ٱلۡحَقُّ مِن رَّبِّكُمۡۖ فَمَن شَآءَ فَلۡيُؤۡمِن وَمَن شَآءَ فَلۡيَكۡفُرۡۚ إِنَّآ أَعۡتَدۡنَا لِلظَّٰلِمِينَ نَارًا أَحَاطَ بِهِمۡ سُرَادِقُهَاۚ وَإِن يَسۡتَغِيثُواْ يُغَاثُواْ بِمَآءٖ كَٱلۡمُهۡلِ يَشۡوِي ٱلۡوُجُوهَۚ بِئۡسَ ٱلشَّرَابُ وَسَآءَتۡ مُرۡتَفَقًا (29) إِنَّ ٱلَّذِينَ ءَامَنُواْ وَعَمِلُواْ ٱلصَّٰلِحَٰتِ إِنَّا لَا نُضِيعُ أَجۡرَ مَنۡ أَحۡسَنَ عَمَلًا (30) أُوْلَٰٓئِكَ لَهُمۡ جَنَّٰتُ عَدۡنٖ تَجۡرِي مِن تَحۡتِهِمُ ٱلۡأَنۡهَٰرُ يُحَلَّوۡنَ فِيهَا مِنۡ أَسَاوِرَ مِن ذَهَبٖ وَيَلۡبَسُونَ ثِيَابًا خُضۡرٗا مِّن سُندُسٖ وَإِسۡتَبۡرَقٖ مُّتَّكِـِٔينَ فِيهَا عَلَى ٱلۡأَرَآئِكِۚ نِعۡمَ ٱلثَّوَابُ وَحَسُنَتۡ مُرۡتَفَقٗا (31) ۞وَٱضۡرِبۡ لَهُم مَّثَلٗا رَّجُلَيۡنِ جَعَلۡنَا لِأَحَدِهِمَا جَنَّتَيۡنِ مِنۡ أَعۡنَٰبٖ وَحَفَفۡنَٰهُمَا بِنَخۡلٖ وَجَعَلۡنَا بَيۡنَهُمَا زَرۡعٗا (32) كِلۡتَا ٱلۡجَنَّتَيۡنِ ءَاتَتۡ أُكُلَهَا وَلَمۡ تَظۡلِم مِّنۡهُ شَيۡـٔٗاۚ وَفَجَّرۡنَا خِلَٰلَهُمَا نَهَرٗا (33) وَكَانَ لَهُۥ ثَمَرٞ فَقَالَ لِصَٰحِبِهِۦ وَهُوَ يُحَاوِرُهُۥٓ أَنَا۠ أَكۡثَرُ مِنكَ مَالٗا وَأَعَزُّ نَفَرٗا (34) وَدَخَلَ جَنَّتَهُۥ وَهُوَ ظَالِمٞ لِّنَفۡسِهِۦ قَالَ مَآ أَظُنُّ أَن تَبِيدَ هَٰذِهِۦٓ أَبَدٗا (35) وَمَآ أَظُنُّ ٱلسَّاعَةَ قَآئِمَةٗ وَلَئِن رُّدِدتُّ إِلَىٰ رَبِّي لَأَجِدَنَّ خَيۡرٗا مِّنۡهَا مُنقَلَبٗا (36) قَالَ لَهُۥ صَاحِبُهُۥ وَهُوَ يُحَاوِرُهُۥٓ أَكَفَرۡتَ بِٱلَّذِي خَلَقَكَ مِن تُرَابٖ ثُمَّ مِن نُّطۡفَةٖ ثُمَّ سَوَّىٰكَ رَجُلٗا (37) لَّٰكِنَّا۠ هُوَ ٱللَّهُ رَبِّي وَلَآ أُشۡرِكُ بِرَبِّيٓ أَحَدٗا (38) وَلَوۡلَآ إِذۡ دَخَلۡتَ جَنَّتَكَ قُلۡتَ مَا شَآءَ ٱللَّهُ لَا قُوَّةَ إِلَّا بِٱللَّهِۚ إِن تَرَنِ أَنَا۠ أَقَلَّ مِنكَ مَالٗا وَوَلَدٗا (39) فَعَسَىٰ رَبِّيٓ أَن يُؤۡتِيَنِ خَيۡرٗا مِّن جَنَّتِكَ وَيُرۡسِلَ عَلَيۡهَا حُسۡبَانٗا مِّنَ ٱلسَّمَآءِ فَتُصۡبِحَ صَعِيدٗا زَلَقًا (40) أَوۡ يُصۡبِحَ مَآؤُهَا غَوۡرٗا فَلَن تَسۡتَطِيعَ لَهُۥ طَلَبٗا (41) وَأُحِيطَ بِثَمَرِهِۦ فَأَصۡبَحَ يُقَلِّبُ كَفَّيۡهِ عَلَىٰ مَآ أَنفَقَ فِيهَا وَهِيَ خَاوِيَةٌ عَلَىٰ عُرُوشِهَا وَيَقُولُ يَٰلَيۡتَنِي لَمۡ أُشۡرِكۡ بِرَبِّيٓ أَحَدٗا (42) وَلَمۡ تَكُن لَّهُۥ فِئَةٞ يَنصُرُونَهُۥ مِن دُونِ ٱللَّهِ وَمَا كَانَ مُنتَصِرًا (43) هُنَالِكَ ٱلۡوَلَٰيَةُ لِلَّهِ ٱلۡحَقِّۚ هُوَ خَيۡرٞ ثَوَابٗا وَخَيۡرٌ عُقۡبٗا (44) وَٱضۡرِبۡ لَهُم مَّثَلَ ٱلۡحَيَوٰةِ ٱلدُّنۡيَا كَمَآءٍ أَنزَلۡنَٰهُ مِنَ ٱلسَّمَآءِ فَٱخۡتَلَطَ بِهِۦ نَبَاتُ ٱلۡأَرۡضِ فَأَصۡبَحَ هَشِيمٗا تَذۡرُوهُ ٱلرِّيَٰحُۗ وَكَانَ ٱللَّهُ عَلَىٰ كُلِّ شَيۡءٖ مُّقۡتَدِرًا (45) ٱلۡمَالُ وَٱلۡبَنُونَ زِينَةُ ٱلۡحَيَوٰةِ ٱلدُّنۡيَاۖ وَٱلۡبَٰقِيَٰتُ ٱلصَّٰلِحَٰتُ خَيۡرٌ عِندَ رَبِّكَ ثَوَابٗا وَخَيۡرٌ أَمَلٗا (46) وَيَوۡمَ نُسَيِّرُ ٱلۡجِبَالَ وَتَرَى ٱلۡأَرۡضَ بَارِزَةٗ وَحَشَرۡنَٰهُمۡ فَلَمۡ نُغَادِرۡ مِنۡهُمۡ أَحَدٗا (47) وَعُرِضُواْ عَلَىٰ رَبِّكَ صَفّٗا لَّقَدۡ جِئۡتُمُونَا كَمَا خَلَقۡنَٰكُمۡ أَوَّلَ مَرَّةِۭۚ بَلۡ زَعَمۡتُمۡ أَلَّن نَّجۡعَلَ لَكُم مَّوۡعِدٗا (48) وَوُضِعَ ٱلۡكِتَٰبُ فَتَرَى ٱلۡمُجۡرِمِينَ مُشۡفِقِينَ مِمَّا فِيهِ وَيَقُولُونَ يَٰوَيۡلَتَنَا مَالِ هَٰذَا ٱلۡكِتَٰبِ لَا يُغَادِرُ صَغِيرَةٗ وَلَا كَبِيرَةً إِلَّآ أَحۡصَىٰهَاۚ وَوَجَدُواْ مَا عَمِلُواْ حَاضِرٗاۗ وَلَا يَظۡلِمُ رَبُّكَ أَحَدٗا (49) وَإِذۡ قُلۡنَا لِلۡمَلَٰٓئِكَةِ ٱسۡجُدُواْ لِأٓدَمَ فَسَجَدُوٓاْ إِلَّآ إِبۡلِيسَ كَانَ مِنَ ٱلۡجِنِّ فَفَسَقَ عَنۡ أَمۡرِ رَبِّهِۦٓۗ أَفَتَتَّخِذُونَهُۥ وَذُرِّيَّتَهُۥٓ أَوۡلِيَآءَ مِن دُونِي وَهُمۡ لَكُمۡ عَدُوُّۢۚ بِئۡسَ لِلظَّٰلِمِينَ بَدَلٗا (50) ۞مَّآ أَشۡهَدتُّهُمۡ خَلۡقَ ٱلسَّمَٰوَٰتِ وَٱلۡأَرۡضِ وَلَا خَلۡقَ أَنفُسِهِمۡ وَمَا كُنتُ مُتَّخِذَ ٱلۡمُضِلِّينَ عَضُدٗا (51) وَيَوۡمَ يَقُولُ نَادُواْ شُرَكَآءِيَ ٱلَّذِينَ زَعَمۡتُمۡ فَدَعَوۡهُمۡ فَلَمۡ يَسۡتَجِيبُواْ لَهُمۡ وَجَعَلۡنَا بَيۡنَهُم مَّوۡبِقٗا (52) وَرَءَا ٱلۡمُجۡرِمُونَ ٱلنَّارَ فَظَنُّوٓاْ أَنَّهُم مُّوَاقِعُوهَا وَلَمۡ يَجِدُواْ عَنۡهَا مَصۡرِفٗا (53) وَلَقَدۡ صَرَّفۡنَا فِي هَٰذَا ٱلۡقُرۡءَانِ لِلنَّاسِ مِن كُلِّ مَثَلٖۚ وَكَانَ ٱلۡإِنسَٰنُ أَكۡثَرَ شَيۡءٖ جَدَلٗا (54) وَمَا مَنَعَ ٱلنَّاسَ أَن يُؤۡمِنُوٓاْ إِذۡ جَآءَهُمُ ٱلۡهُدَىٰ وَيَسۡتَغۡفِرُواْ رَبَّهُمۡ إِلَّآ أَن تَأۡتِيَهُمۡ سُنَّةُ ٱلۡأَوَّلِينَ أَوۡ يَأۡتِيَهُمُ ٱلۡعَذَابُ قُبُلٗا (55) وَمَا نُرۡسِلُ ٱلۡمُرۡسَلِينَ إِلَّا مُبَشِّرِينَ وَمُنذِرِينَۚ وَيُجَٰدِلُ ٱلَّذِينَ كَفَرُواْ بِٱلۡبَٰطِلِ لِيُدۡحِضُواْ بِهِ ٱلۡحَقَّۖ وَٱتَّخَذُوٓاْ ءَايَٰتِي وَمَآ أُنذِرُواْ هُزُوٗا (56) وَمَنۡ أَظۡلَمُ مِمَّن ذُكِّرَ بِـَٔايَٰتِ رَبِّهِۦ فَأَعۡرَضَ عَنۡهَا وَنَسِيَ مَا قَدَّمَتۡ يَدَاهُۚ إِنَّا جَعَلۡنَا عَلَىٰ قُلُوبِهِمۡ أَكِنَّةً أَن يَفۡقَهُوهُ وَفِيٓ ءَاذَانِهِمۡ وَقۡرٗاۖ وَإِن تَدۡعُهُمۡ إِلَى ٱلۡهُدَىٰ فَلَن يَهۡتَدُوٓاْ إِذًا أَبَدٗا (57) وَرَبُّكَ ٱلۡغَفُورُ ذُو ٱلرَّحۡمَةِۖ لَوۡ يُؤَاخِذُهُم بِمَا كَسَبُواْ لَعَجَّلَ لَهُمُ ٱلۡعَذَابَۚ بَل لَّهُم مَّوۡعِدٞ لَّن يَجِدُواْ مِن دُونِهِۦ مَوۡئِلٗا (58) وَتِلۡكَ ٱلۡقُرَىٰٓ أَهۡلَكۡنَٰهُمۡ لَمَّا ظَلَمُواْ وَجَعَلۡنَا لِمَهۡلِكِهِم مَّوۡعِدٗا (59) وَإِذۡ قَالَ مُوسَىٰ لِفَتَىٰهُ لَآ أَبۡرَحُ حَتَّىٰٓ أَبۡلُغَ مَجۡمَعَ ٱلۡبَحۡرَيۡنِ أَوۡ أَمۡضِيَ حُقُبٗا (60) فَلَمَّا بَلَغَا مَجۡمَعَ بَيۡنِهِمَا نَسِيَا حُوتَهُمَا فَٱتَّخَذَ سَبِيلَهُۥ فِي ٱلۡبَحۡرِ سَرَبٗا (61) فَلَمَّا جَاوَزَا قَالَ لِفَتَىٰهُ ءَاتِنَا غَدَآءَنَا لَقَدۡ لَقِينَا مِن سَفَرِنَا هَٰذَا نَصَبٗا (62) قَالَ أَرَءَيۡتَ إِذۡ أَوَيۡنَآ إِلَى ٱلصَّخۡرَةِ فَإِنِّي نَسِيتُ ٱلۡحُوتَ وَمَآ أَنسَىٰنِيهُ إِلَّا ٱلشَّيۡطَٰنُ أَنۡ أَذۡكُرَهُۥۚ وَٱتَّخَذَ سَبِيلَهُۥ فِي ٱلۡبَحۡرِ عَجَبٗا (63) قَالَ ذَٰلِكَ مَا كُنَّا نَبۡغِۚ فَٱرۡتَدَّا عَلَىٰٓ ءَاثَارِهِمَا قَصَصٗا (64) فَوَجَدَا عَبۡدٗا مِّنۡ عِبَادِنَآ ءَاتَيۡنَٰهُ رَحۡمَةٗ مِّنۡ عِندِنَا وَعَلَّمۡنَٰهُ مِن لَّدُنَّا عِلۡمٗا (65) قَالَ لَهُۥ مُوسَىٰ هَلۡ أَتَّبِعُكَ عَلَىٰٓ أَن تُعَلِّمَنِ مِمَّا عُلِّمۡتَ رُشۡدٗا (66) قَالَ إِنَّكَ لَن تَسۡتَطِيعَ مَعِيَ صَبۡرٗا (67) وَكَيۡفَ تَصۡبِرُ عَلَىٰ مَا لَمۡ تُحِطۡ بِهِۦ خُبۡرٗا (68) قَالَ سَتَجِدُنِيٓ إِن شَآءَ ٱللَّهُ صَابِرٗا وَلَآ أَعۡصِي لَكَ أَمۡرٗا (69) قَالَ فَإِنِ ٱتَّبَعۡتَنِي فَلَا تَسۡـَٔلۡنِي عَن شَيۡءٍ حَتَّىٰٓ أُحۡدِثَ لَكَ مِنۡهُ ذِكۡرٗا (70) فَٱنطَلَقَا حَتَّىٰٓ إِذَا رَكِبَا فِي ٱلسَّفِينَةِ خَرَقَهَاۖ قَالَ أَخَرَقۡتَهَا لِتُغۡرِقَ أَهۡلَهَا لَقَدۡ جِئۡتَ شَيۡـًٔا إِمۡرٗا (71) قَالَ أَلَمۡ أَقُلۡ إِنَّكَ لَن تَسۡتَطِيعَ مَعِيَ صَبۡرٗا (72) قَالَ لَا تُؤَاخِذۡنِي بِمَا نَسِيتُ وَلَا تُرۡهِقۡنِي مِنۡ أَمۡرِي عُسۡرٗا (73) فَٱنطَلَقَا حَتَّىٰٓ إِذَا لَقِيَا غُلَٰمٗا فَقَتَلَهُۥ قَالَ أَقَتَلۡتَ نَفۡسٗا زَكِيَّةَۢ بِغَيۡرِ نَفۡسٖ لَّقَدۡ جِئۡتَ شَيۡـٔٗا نُّكۡرٗا (74) ۞قَالَ أَلَمۡ أَقُل لَّكَ إِنَّكَ لَن تَسۡتَطِيعَ مَعِيَ صَبۡرٗا (75) قَالَ إِن سَأَلۡتُكَ عَن شَيۡءِۭ بَعۡدَهَا فَلَا تُصَٰحِبۡنِيۖ قَدۡ بَلَغۡتَ مِن لَّدُنِّي عُذۡرٗا (76) فَٱنطَلَقَا حَتَّىٰٓ إِذَآ أَتَيَآ أَهۡلَ قَرۡيَةٍ ٱسۡتَطۡعَمَآ أَهۡلَهَا فَأَبَوۡاْ أَن يُضَيِّفُوهُمَا فَوَجَدَا فِيهَا جِدَارٗا يُرِيدُ أَن يَنقَضَّ فَأَقَامَهُۥۖ قَالَ لَوۡ شِئۡتَ لَتَّخَذۡتَ عَلَيۡهِ أَجۡرٗا (77) قَالَ هَٰذَا فِرَاقُ بَيۡنِي وَبَيۡنِكَۚ سَأُنَبِّئُكَ بِتَأۡوِيلِ مَا لَمۡ تَسۡتَطِع عَّلَيۡهِ صَبۡرًا (78) أَمَّا ٱلسَّفِينَةُ فَكَانَتۡ لِمَسَٰكِينَ يَعۡمَلُونَ فِي ٱلۡبَحۡرِ فَأَرَدتُّ أَنۡ أَعِيبَهَا وَكَانَ وَرَآءَهُم مَّلِكٞ يَأۡخُذُ كُلَّ سَفِينَةٍ غَصۡبٗا (79) وَأَمَّا ٱلۡغُلَٰمُ فَكَانَ أَبَوَاهُ مُؤۡمِنَيۡنِ فَخَشِينَآ أَن يُرۡهِقَهُمَا طُغۡيَٰنٗا وَكُفۡرٗا (80) فَأَرَدۡنَآ أَن يُبۡدِلَهُمَا رَبُّهُمَا خَيۡرٗا مِّنۡهُ زَكَوٰةٗ وَأَقۡرَبَ رُحۡمٗا (81) وَأَمَّا ٱلۡجِدَارُ فَكَانَ لِغُلَٰمَيۡنِ يَتِيمَيۡنِ فِي ٱلۡمَدِينَةِ وَكَانَ تَحۡتَهُۥ كَنزٞ لَّهُمَا وَكَانَ أَبُوهُمَا صَٰلِحٗا فَأَرَادَ رَبُّكَ أَن يَبۡلُغَآ أَشُدَّهُمَا وَيَسۡتَخۡرِجَا كَنزَهُمَا رَحۡمَةٗ مِّن رَّبِّكَۚ وَمَا فَعَلۡتُهُۥ عَنۡ أَمۡرِيۚ ذَٰلِكَ تَأۡوِيلُ مَا لَمۡ تَسۡطِع عَّلَيۡهِ صَبۡرٗا (82) وَيَسۡـَٔلُونَكَ عَن ذِي ٱلۡقَرۡنَيۡنِۖ قُلۡ سَأَتۡلُواْ عَلَيۡكُم مِّنۡهُ ذِكۡرًا (83) إِنَّا مَكَّنَّا لَهُۥ فِي ٱلۡأَرۡضِ وَءَاتَيۡنَٰهُ مِن كُلِّ شَيۡءٖ سَبَبٗا (84) فَأَتۡبَعَ سَبَبًا (85) حَتَّىٰٓ إِذَا بَلَغَ مَغۡرِبَ ٱلشَّمۡسِ وَجَدَهَا تَغۡرُبُ فِي عَيۡنٍ حَمِئَةٖ وَوَجَدَ عِندَهَا قَوۡمٗاۖ قُلۡنَا يَٰذَا ٱلۡقَرۡنَيۡنِ إِمَّآ أَن تُعَذِّبَ وَإِمَّآ أَن تَتَّخِذَ فِيهِمۡ حُسۡنٗا (86) قَالَ أَمَّا مَن ظَلَمَ فَسَوۡفَ نُعَذِّبُهُۥ ثُمَّ يُرَدُّ إِلَىٰ رَبِّهِۦ فَيُعَذِّبُهُۥ عَذَابٗا نُّكۡرٗا (87) وَأَمَّا مَنۡ ءَامَنَ وَعَمِلَ صَٰلِحٗا فَلَهُۥ جَزَآءً ٱلۡحُسۡنَىٰۖ وَسَنَقُولُ لَهُۥ مِنۡ أَمۡرِنَا يُسۡرٗا (88) ثُمَّ أَتۡبَعَ سَبَبًا (89) حَتَّىٰٓ إِذَا بَلَغَ مَطۡلِعَ ٱلشَّمۡسِ وَجَدَهَا تَطۡلُعُ عَلَىٰ قَوۡمٖ لَّمۡ نَجۡعَل لَّهُم مِّن دُونِهَا سِتۡرٗا (90) كَذَٰلِكَۖ وَقَدۡ أَحَطۡنَا بِمَا لَدَيۡهِ خُبۡرٗا (91) ثُمَّ أَتۡبَعَ سَبَبًا (92) حَتَّىٰٓ إِذَا بَلَغَ بَيۡنَ ٱلسَّدَّيۡنِ وَجَدَ مِن دُونِهِمَا قَوۡمٗا لَّا يَكَادُونَ يَفۡقَهُونَ قَوۡلٗا (93) قَالُواْ يَٰذَا ٱلۡقَرۡنَيۡنِ إِنَّ يَأۡجُوجَ وَمَأۡجُوجَ مُفۡسِدُونَ فِي ٱلۡأَرۡضِ فَهَلۡ نَجۡعَلُ لَكَ خَرۡجًا عَلَىٰٓ أَن تَجۡعَلَ بَيۡنَنَا وَبَيۡنَهُمۡ سَدّٗا (94) قَالَ مَا مَكَّنِّي فِيهِ رَبِّي خَيۡرٞ فَأَعِينُونِي بِقُوَّةٍ أَجۡعَلۡ بَيۡنَكُمۡ وَبَيۡنَهُمۡ رَدۡمًا (95) ءَاتُونِي زُبَرَ ٱلۡحَدِيدِۖ حَتَّىٰٓ إِذَا سَاوَىٰ بَيۡنَ ٱلصَّدَفَيۡنِ قَالَ ٱنفُخُواْۖ حَتَّىٰٓ إِذَا جَعَلَهُۥ نَارٗا قَالَ ءَاتُونِيٓ أُفۡرِغۡ عَلَيۡهِ قِطۡرٗا (96) فَمَا ٱسۡطَٰعُوٓاْ أَن يَظۡهَرُوهُ وَمَا ٱسۡتَطَٰعُواْ لَهُۥ نَقۡبٗا (97) قَالَ هَٰذَا رَحۡمَةٞ مِّن رَّبِّيۖ فَإِذَا جَآءَ وَعۡدُ رَبِّي جَعَلَهُۥ دَكَّآءَۖ وَكَانَ وَعۡدُ رَبِّي حَقّٗا (98) ۞وَتَرَكۡنَا بَعۡضَهُمۡ يَوۡمَئِذٖ يَمُوجُ فِي بَعۡضٖۖ وَنُفِخَ فِي ٱلصُّورِ فَجَمَعۡنَٰهُمۡ جَمۡعٗا (99) وَعَرَضۡنَا جَهَنَّمَ يَوۡمَئِذٖ لِّلۡكَٰفِرِينَ عَرۡضًا (100) ٱلَّذِينَ كَانَتۡ أَعۡيُنُهُمۡ فِي غِطَآءٍ عَن ذِكۡرِي وَكَانُواْ لَا يَسۡتَطِيعُونَ سَمۡعًا (101) أَفَحَسِبَ ٱلَّذِينَ كَفَرُوٓاْ أَن يَتَّخِذُواْ عِبَادِي مِن دُونِيٓ أَوۡلِيَآءَۚ إِنَّآ أَعۡتَدۡنَا جَهَنَّمَ لِلۡكَٰفِرِينَ نُزُلٗا (102) قُلۡ هَلۡ نُنَبِّئُكُم بِٱلۡأَخۡسَرِينَ أَعۡمَٰلًا (103) ٱلَّذِينَ ضَلَّ سَعۡيُهُمۡ فِي ٱلۡحَيَوٰةِ ٱلدُّنۡيَا وَهُمۡ يَحۡسَبُونَ أَنَّهُمۡ يُحۡسِنُونَ صُنۡعًا (104) أُوْلَٰٓئِكَ ٱلَّذِينَ كَفَرُواْ بِـَٔايَٰتِ رَبِّهِمۡ وَلِقَآئِهِۦ فَحَبِطَتۡ أَعۡمَٰلُهُمۡ فَلَا نُقِيمُ لَهُمۡ يَوۡمَ ٱلۡقِيَٰمَةِ وَزۡنٗا (105) ذَٰلِكَ جَزَآؤُهُمۡ جَهَنَّمُ بِمَا كَفَرُواْ وَٱتَّخَذُوٓاْ ءَايَٰتِي وَرُسُلِي هُزُوًا (106) إِنَّ ٱلَّذِينَ ءَامَنُواْ وَعَمِلُواْ ٱلصَّٰلِحَٰتِ كَانَتۡ لَهُمۡ جَنَّٰتُ ٱلۡفِرۡدَوۡسِ نُزُلًا (107) خَٰلِدِينَ فِيهَا لَا يَبۡغُونَ عَنۡهَا حِوَلٗا (108) قُل لَّوۡ كَانَ ٱلۡبَحۡرُ مِدَادٗا لِّكَلِمَٰتِ رَبِّي لَنَفِدَ ٱلۡبَحۡرُ قَبۡلَ أَن تَنفَدَ كَلِمَٰتُ رَبِّي وَلَوۡ جِئۡنَا بِمِثۡلِهِۦ مَدَدٗا (109) قُلۡ إِنَّمَآ أَنَا۠ بَشَرٞ مِّثۡلُكُمۡ يُوحَىٰٓ إِلَيَّ أَنَّمَآ إِلَٰهُكُمۡ إِلَٰهٞ وَٰحِدٞۖ فَمَن كَانَ يَرۡجُواْ لِقَآءَ رَبِّهِۦ فَلۡيَعۡمَلۡ عَمَلٗا صَٰلِحٗا وَلَا يُشۡرِكۡ بِعِبَادَةِ رَبِّهِۦٓ أَحَدَۢا (110)`;

// --- Constants & Config ---
const CATEGORIES = {
    Personal: { color: 'from-pink-500 to-rose-500', base: 'text-pink-500', bg: 'bg-pink-500', glow: 'rgba(236, 72, 153, 0.4)' },
    Work: { color: 'from-sky-500 to-blue-600', base: 'text-sky-500', bg: 'bg-sky-500', glow: 'rgba(14, 165, 233, 0.4)' },
    Learning: { color: 'from-violet-500 to-purple-600', base: 'text-violet-500', bg: 'bg-violet-500', glow: 'rgba(139, 92, 246, 0.4)' },
    Shopping: { color: 'from-teal-400 to-emerald-500', base: 'text-teal-500', bg: 'bg-teal-500', glow: 'rgba(20, 184, 166, 0.4)' },
    Health: { color: 'from-green-500 to-emerald-600', base: 'text-green-500', bg: 'bg-green-500', glow: 'rgba(34, 197, 94, 0.4)' },
    Ideas: { color: 'from-amber-400 to-yellow-500', base: 'text-amber-500', bg: 'bg-amber-500', glow: 'rgba(245, 158, 11, 0.4)' }
};

const MOODS = {
    'High Energy': { icon: 'zap', theme: 'text-yellow-400' },
    'Neutral': { icon: 'coffee', theme: 'text-slate-400' },
    'Low Energy': { icon: 'battery', theme: 'text-emerald-400' }
};

const EMOJIS = ['🚀', '💡', '🔥', '🎯', '🎨', '✨', '💪', '🏆', '⭐', '😁'];

const TRANSLATIONS = {
    en: {
        title: "B-Task 🚀",
        appNamePlaceholder: "Name your workspace...",
        inputPlaceholder: "What's your next win?",
        daily: "Daily",
        weekly: "Weekly",
        emptyTitle: "All clear for now!",
        emptySub: "Enjoy the space or add a new goal.",
        welcome: "Welcome Back",
        subtitle: "Sign in to sync your creative space.",
        username: "Email",
        password: "Password",
        enter: "Enter Workspace 🚀",
        or: "OR",
        createAccount: "Create New Account",
        logout: "Log Out",
        statsTitle: "Your Analytics",
        totalScore: "Total Score",
        tasksDone: "Tasks Done",
        rate: "Completion Rate",
        focusDist: "Focus Distribution",
        prodTrend: "Productivity Trend",
        loginError: "Invalid email or password.",
        registerError: "Error creating account. Email used?",
        fillFields: "Please fill in all fields.",
        taskName: "Task Name",
        loadingEnc: "Loading encouragement...",
        athkar: "Athkar",
        morningAthkar: "Morning Athkar",
        eveningAthkar: "Evening Athkar",
        resetCounts: "Reset Counts",
        repetitions: "Repetitions",
        guestLogin: "Continue as Guest",
        moodHigh: "High Energy",
        moodNeutral: "Neutral",
        moodLow: "Low Energy",
        Personal: "Personal",
        Work: "Work",
        Learning: "Learning",
        Shopping: "Shopping",
        Health: "Health",
        Ideas: "Ideas",
        tasbih: "Tasbih",
        kahf: "Al-Kahf"
    },
    ar: {
        title: "B-Task 🚀",
        appNamePlaceholder: "سمِّ مساحتك الخاصة...",
        inputPlaceholder: "ما هو إنجازك القادم؟",
        daily: "يومي",
        weekly: "أسبوعي",
        emptyTitle: "كل شيء نظيف حالياً!",
        emptySub: "استمتع بوقتك أو أضف هدفاً جديداً.",
        welcome: "أهلاً بك مجدداً",
        subtitle: "سجل الدخول لمزامنة مساحتك الإبداعية.",
        username: "البريد الإلكتروني",
        password: "كلمة المرور",
        enter: "ادخل المساحة 🚀",
        or: "أو",
        createAccount: "إنشاء حساب جديد",
        logout: "تسجيل خروج",
        statsTitle: "تحليلاتك",
        totalScore: "النقاط الكلية",
        tasksDone: "المهام المنجزة",
        rate: "معدل الإنجاز",
        focusDist: "توزيع التركيز",
        prodTrend: "اتجاه الإنتاجية",
        loginError: "البريد أو كلمة المرور غير صحيحة.",
        registerError: "خطأ في الإنشاء. هل البريد مستخدم؟",
        fillFields: "يرجى ملء جميع الحقول.",
        taskName: "اسم المهمة",
        loadingEnc: "جاري تحميل التحفيز...",
        athkar: "الأذكار",
        morningAthkar: "أذكار الصباح",
        eveningAthkar: "أذكار المساء",
        resetCounts: "إعادة تعيين العداد",
        guestLogin: "تابع كضيف",
        moodHigh: "طاقة عالية",
        moodNeutral: "طبيعي",
        moodLow: "طاقة منخفضة",
        Personal: "شخصي",
        Work: "عمل",
        Learning: "تعلم",
        Shopping: "مشتريات",
        Health: "صحة",
        Ideas: "أفكار",
        tasbih: "السبحة",
        kahf: "الكهف"
    }
};

// --- State ---
// Simplified for Local-Only Mode
let state = {
    todos: [],
    appName: '',
    viewMode: 'Daily',
    currentMood: 'Neutral',
    selectedCategory: 'Personal',
    language: 'en',

    timer: {
        active: false,
        timeLeft: 1500,
        taskId: null,
        interval: null
    },
    athkarCounts: {},
    athkarMode: 'morning'
};

// --- Initialization ---
document.addEventListener('DOMContentLoaded', () => {
    initEmojis();
    setupEventListeners();

    // Load Data directly from LocalStorage
    loadLocalData();

    // Check language
    const storedLang = localStorage.getItem('beltagy_lang');
    if (storedLang) {
        setLanguage(storedLang);
    } else {
        initMoodSelector();
        initCategoryDock();
        render(); // Render with default
    }
});

function loadLocalData() {
    // Load Todos
    const storedTodos = localStorage.getItem('beltagy_todos');
    state.todos = storedTodos ? JSON.parse(storedTodos) : [];

    // Load Preferences
    const storedPrefs = localStorage.getItem('beltagy_prefs');
    if (storedPrefs) {
        const prefs = JSON.parse(storedPrefs);
        state.appName = prefs.appName || '';
        state.currentMood = prefs.mood || 'Neutral';
        state.selectedCategory = prefs.selectedCategory || 'Personal';

        // Update UI inputs
        document.getElementById('app-name-input').value = state.appName;
    }
}

function saveLocalData() {
    localStorage.setItem('beltagy_todos', JSON.stringify(state.todos));

    const prefs = {
        appName: state.appName,
        mood: state.currentMood,
        selectedCategory: state.selectedCategory
    };
    localStorage.setItem('beltagy_prefs', JSON.stringify(prefs));
}

// --- CRUD Logic (Local) ---
// Replaces all Firebase calls with direct array manipulation

window.addTodo = async () => {
    const input = document.getElementById('todo-input');
    const text = input.value.trim();
    if (!text) return;

    let colorClass = CATEGORIES[state.selectedCategory].color;
    // Special case for Low Energy mood
    if (state.currentMood === 'Low Energy') {
        colorClass = 'from-teal-500 to-emerald-500';
    }

    const newTodo = {
        id: Date.now().toString(),
        text,
        completed: false,
        category: state.selectedCategory,
        colorClass: colorClass,
        viewMode: state.viewMode,
        createdAt: new Date() // Use local date
    };

    state.todos.unshift(newTodo);
    saveLocalData();

    input.value = '';
    render();
    updateStats();
};

window.toggleTodo = async (id) => {
    const todo = state.todos.find(t => t.id === id);
    if (todo) {
        todo.completed = !todo.completed;
        saveLocalData();
        render();
        updateStats();
    }
};

window.deleteTodo = async (id) => {
    state.todos = state.todos.filter(t => t.id !== id);
    saveLocalData();
    render();
    updateStats();
};

// Replaces saveUserPref
function saveUserPref() {
    saveLocalData();
}

// --- Exposed Functions for HTML ---
// Because we are a module, we attach these to window for the onclick handlers in HTML
window.handleLogin = async () => {
    const email = document.getElementById('auth-username').value.trim();
    const password = document.getElementById('auth-password').value.trim();
    const err = document.getElementById('auth-error');

    if (!email || !password) {
        err.innerText = TRANSLATIONS[state.language].fillFields;
        err.classList.remove('hidden');
        return;
    }

    try {
        await signInWithEmailAndPassword(auth, email, password);
    } catch (error) {
        console.error(error);

        if (error.code === 'auth/api-key-not-valid' || error.code === 'auth/invalid-api-key') {
            err.innerHTML = "Setup Required: Please use <b>Guest Mode</b> or valid API keys.";
        } else {
            err.innerText = TRANSLATIONS[state.language].loginError;
        }
        err.classList.remove('hidden');
    }
};

window.handleGuestLogin = () => {
    state.user = { uid: 'guest', email: 'guest@local', isGuest: true };
    document.getElementById('auth-modal').classList.add('hidden');
    subscribeToData();
};

window.handleRegister = async () => {
    const email = document.getElementById('auth-username').value.trim();
    const password = document.getElementById('auth-password').value.trim();
    const err = document.getElementById('auth-error');

    if (!email || !password) {
        err.innerText = TRANSLATIONS[state.language].fillFields;
        err.classList.remove('hidden');
        return;
    }

    try {
        await createUserWithEmailAndPassword(auth, email, password);
    } catch (error) {
        console.error(error);

        if (error.code === 'auth/api-key-not-valid' || error.code === 'auth/invalid-api-key') {
            err.innerHTML = "Setup Required: Please use <b>Guest Mode</b> or valid API keys.";
        } else {
            const msg = error.code ? `Firebase Error: ${error.code}` : TRANSLATIONS[state.language].registerError;
            err.innerText = msg;
        }
        err.classList.remove('hidden');
    }
};

window.logout = () => {
    if (state.user?.isGuest) {
        state.user = null;
        state.todos = [];
        document.getElementById('auth-modal').classList.remove('hidden');
        render();
    } else {
        signOut(auth);
    }
};

window.handleGuestLogin = () => {
    state.user = { uid: 'guest', email: 'guest@local', isGuest: true };
    document.getElementById('auth-modal').classList.add('hidden');
    subscribeToData();
};

// (Deleted unused Firebase CRUD functions)

window.switchView = (mode) => {
    state.viewMode = mode;

    // Update Buttons
    const buttons = ['Daily', 'Weekly', 'Athkar', 'Tasbih', 'Kahf'];
    const inactiveClass = 'px-5 py-1.5 rounded-lg text-xs font-medium transition-all text-slate-400 hover:text-white';

    // Define active colors per mode
    const activeColors = {
        'Daily': 'bg-indigo-500 text-white shadow-lg shadow-indigo-500/20',
        'Weekly': 'bg-indigo-500 text-white shadow-lg shadow-indigo-500/20',
        'Athkar': 'bg-indigo-500 text-white shadow-lg shadow-indigo-500/20',
        'Tasbih': 'bg-emerald-600 text-white shadow-lg shadow-emerald-500/20',
        'Kahf': 'bg-amber-600 text-white shadow-lg shadow-amber-500/20'
    };

    buttons.forEach(v => {
        const btn = document.getElementById(`btn-${v.toLowerCase()}`);
        if (btn) {
            if (v === mode) {
                btn.className = `px-5 py-1.5 rounded-lg text-xs font-medium transition-all ${activeColors[v] || activeColors['Daily']}`;
            } else {
                btn.className = inactiveClass;
            }
        }
    });

    // Translation for Tasbih button label logic is handled in setLanguage if needed, 
    // but for now let's just make sure the view switches.

    render();
};

window.incrementAthkar = (id) => {
    const list = state.athkarMode === 'morning' ? ATHKAR_MORNING : ATHKAR_EVENING;
    const thikr = list.find(t => t.id === id);
    if (!thikr) return;

    // Initialize if not present
    if (state.athkarCounts[id] === undefined) state.athkarCounts[id] = 0;

    // Increment if not done
    if (state.athkarCounts[id] < thikr.count) {
        state.athkarCounts[id]++;
        // Visual feedback could go here
        render();
    }
};

window.resetAthkar = () => {
    state.athkarCounts = {};
    render();
};

window.toggleAthkarMode = () => {
    state.athkarMode = state.athkarMode === 'morning' ? 'evening' : 'morning';
    // Optional: Reset counts when switching mode? Or keep them separate?
    // User expectation: usually separate per time of day, but 'resetAthkar' wipes all. 
    // For now we keep one count object, but IDs are different (100+ for evening), so it works fine.
    render();
};

window.toggleStats = () => {
    const modal = document.getElementById('stats-modal');
    if (modal.classList.contains('hidden')) { modal.classList.remove('hidden'); updateStats(); } else { modal.classList.add('hidden'); }
};

window.handleInputKey = (e) => {
    if (e.key === 'Enter') window.addTodo();
};

// --- Language Logic ---
function setLanguage(lang) {
    state.language = lang;
    localStorage.setItem('beltagy_lang', lang);
    const t = TRANSLATIONS[lang];
    const isRTL = lang === 'ar';

    // 1. Update HTML Dir & Classes
    document.documentElement.setAttribute('dir', isRTL ? 'rtl' : 'ltr');
    document.documentElement.lang = lang;
    const body = document.body;

    if (isRTL) {
        body.classList.add('font-arabic');
        body.classList.remove('font-sans');
    } else {
        body.classList.remove('font-arabic');
        body.classList.add('font-sans');
    }

    // 2. Update Text Content
    document.title = t.title;
    document.querySelector('h1').innerText = t.title;
    document.getElementById('app-name-input').placeholder = t.appNamePlaceholder;
    document.getElementById('todo-input').placeholder = t.inputPlaceholder;
    document.getElementById('btn-daily').innerText = t.daily;
    document.getElementById('btn-daily').innerText = t.daily;
    document.getElementById('btn-weekly').innerText = t.weekly;
    const btnAthkar = document.getElementById('btn-athkar');
    if (btnAthkar) btnAthkar.innerText = t.athkar;
    const btnTasbih = document.getElementById('btn-tasbih');
    if (btnTasbih) btnTasbih.innerText = t.tasbih;
    const btnKahf = document.getElementById('btn-kahf');
    if (btnKahf) btnKahf.innerText = t.kahf;

    // Empty State
    document.querySelector('#empty-state p.text-lg').innerText = t.emptyTitle;
    document.querySelector('#empty-state p.text-sm').innerText = t.emptySub;

    // Auth Modal
    document.querySelector('#auth-modal h1').innerText = t.welcome;
    document.querySelector('#auth-modal p.text-slate-400').innerText = t.subtitle;
    document.querySelectorAll('#auth-modal label')[0].innerText = t.username;
    document.querySelectorAll('#auth-modal label')[1].innerText = t.password;
    document.querySelector('#auth-modal button.bg-gradient-to-r').innerText = t.enter;
    document.querySelector('#auth-modal span.text-slate-600').innerText = t.or;
    document.querySelector('#auth-modal button.bg-white\\/5').innerText = t.createAccount;

    // Guest Button Update
    const guestBtn = document.querySelector('button[onclick="handleGuestLogin()"]');
    if (guestBtn) {
        guestBtn.innerHTML = `<i data-lucide="user-circle" class="w-4 h-4"></i> ${t.guestLogin}`;
    }

    // Toggle Button Text
    const toggleBtn = document.getElementById('lang-toggle');
    if (toggleBtn) {
        toggleBtn.innerText = isRTL ? 'English' : 'عربي';
        toggleBtn.onclick = () => setLanguage(isRTL ? 'en' : 'ar');
    }

    // Stats
    document.querySelector('#stats-modal h2').innerHTML = `<i data-lucide="trending-up" class="text-indigo-400"></i> ${t.statsTitle}`;
    // We need to re-render stats to update labels if open, but mostly static headers
    // Update headers in stats
    const statLabels = document.querySelectorAll('#stats-modal .text-xs.uppercase');
    if (statLabels.length >= 3) {
        statLabels[0].innerText = t.totalScore;
        statLabels[1].innerText = t.tasksDone;
        statLabels[2].innerText = t.rate;
    }
    const chartTitles = document.querySelectorAll('#stats-modal h3');
    if (chartTitles.length >= 2) {
        chartTitles[0].innerText = t.focusDist;
        chartTitles[1].innerText = t.prodTrend;
    }

    // Task Name Input Font (Request #3)
    const nameInput = document.getElementById('app-name-input');
    if (isRTL) {
        nameInput.classList.remove('font-creative');
        nameInput.classList.add('font-arabic');
    } else {
        nameInput.classList.remove('font-arabic');
        // Changing to Caveat as per plan, instead of Dancing Script
        nameInput.classList.remove('font-creative');
        nameInput.classList.add('font-hand'); // Defined in CSS as Caveat
    }

    // Re-render to update translations in list
    render();
    initMoodSelector(); // Refresh mood labels
    initCategoryDock(); // Refresh category labels
    lucide.createIcons();
}


// --- Helper Logic (UI) ---

// Update setMood and setCategory to use saveLocalData explicitly
function setMood(mood, save = true) {
    state.currentMood = mood;
    const container = document.getElementById('mood-selector');
    Array.from(container.children).forEach(btn => {
        const isSelected = btn.dataset.mood === mood;
        btn.className = `flex items-center gap-2 px-4 py-2 rounded-full text-xs font-medium transition-all border ${isSelected
            ? 'bg-white/10 border-white/20 text-white shadow-[0_0_15px_rgba(255,255,255,0.1)]'
            : 'bg-transparent border-transparent text-slate-500 hover:text-slate-300'
            }`;
    });
    if (save) saveLocalData();
}

function setCategory(cat, save = true) {
    state.selectedCategory = cat;
    initCategoryDock();
    const inputContainer = document.querySelector('#todo-input').parentNode;
    const config = CATEGORIES[cat];
    // Apply Glow
    inputContainer.style.borderColor = config.glow.replace('0.4', '1');
    inputContainer.style.boxShadow = `0 0 20px ${config.glow}`;

    if (save) saveLocalData();
}

async function updateName(e) {
    state.appName = e.target.value;
    saveLocalData();
}

function setupEventListeners() {
    document.getElementById('app-name-input').addEventListener('input', debounce(updateName, 500));
    // Language Toggle
    const toggleBtn = document.getElementById('lang-toggle');
    if (toggleBtn) toggleBtn.onclick = () => setLanguage(state.language === 'en' ? 'ar' : 'en');
}

function debounce(func, wait) {
    let timeout;
    return function (...args) {
        const context = this;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), wait);
    };
}


// --- Rendering ---
function render() {
    const list = document.getElementById('todo-list');
    list.innerHTML = '';
    const t = TRANSLATIONS[state.language];

    // Special handling for Athkar View
    if (state.viewMode === 'Athkar') {
        renderAthkar(list);
        return;
    } else if (state.viewMode === 'Tasbih') {
        renderTasbih(list);
        return;
    } else if (state.viewMode === 'Kahf') {
        renderKahf(list);
        return;
    }

    const filtered = state.todos.filter(t => t.viewMode === state.viewMode);

    if (filtered.length === 0) {
        document.getElementById('empty-state').classList.remove('hidden');
        document.getElementById('empty-state').classList.add('flex');
    } else {
        document.getElementById('empty-state').classList.add('hidden');
        document.getElementById('empty-state').classList.remove('flex');

        filtered.forEach(todo => {
            // Check if created date exists? Firestore might return null immediately if local latency compensation?
            // Usually ok.

            const el = document.createElement('div');
            el.className = `group relative bg-slate-900/50 hover:bg-slate-900/80 border border-white/5 rounded-2xl p-4 transition-all duration-300 ${todo.completed ? 'opacity-50' : ''}`;

            // RTL flipping for icons if needed? usually icons are ok, but layout is handled by flex
            // With RTL, flex items-center gap-4 handles order automatically.

            el.innerHTML = `
                <div class="flex items-center gap-4">
                    <button onclick="toggleTodo('${todo.id}')" 
                        class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${todo.completed
                    ? 'bg-emerald-500 border-emerald-500'
                    : 'border-slate-600 hover:border-white'
                }">
                        ${todo.completed ? '<i data-lucide="check" class="w-3 h-3 text-white"></i>' : ''}
                    </button>
                    
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium truncate ${todo.completed ? 'text-slate-500 line-through' : 'text-white'}">
                            ${todo.text}
                        </p>
                        <p class="text-[10px] text-slate-500 flex items-center gap-2 mt-0.5">
                            <span class="w-1.5 h-1.5 rounded-full bg-gradient-to-r ${todo.colorClass}"></span>
                            ${t[todo.category] || todo.category}
                        </p>
                    </div>

                    <div class="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                         <button onclick="openTimer('${todo.id}')" class="p-2 text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 rounded-lg transition-colors" title="Focus Mode">
                            <i data-lucide="play" class="w-4 h-4 rtl-flip"></i> 
                        </button>
                        <button onclick="deleteTodo('${todo.id}')" class="p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
            `;
            list.appendChild(el);
        });
        lucide.createIcons();
    }
}

function renderAthkar(list) {
    document.getElementById('empty-state').classList.add('hidden');
    document.getElementById('empty-state').classList.remove('flex');

    const t = TRANSLATIONS[state.language];
    const isMorning = state.athkarMode === 'morning';

    // Dynamic Theme Classes
    const theme = isMorning ? {
        border: 'border-amber-500/20',
        bg: 'bg-amber-900/20',
        text: 'text-amber-100',
        subtext: 'text-amber-200/60',
        btn: 'bg-amber-500 hover:bg-amber-400 text-slate-900',
        progress: 'bg-amber-500'
    } : {
        border: 'border-indigo-500/20',
        bg: 'bg-indigo-900/20',
        text: 'text-indigo-100',
        subtext: 'text-indigo-200/60',
        btn: 'bg-indigo-500 hover:bg-indigo-400 text-white',
        progress: 'bg-indigo-500'
    };

    // Header with Toggle and Reset
    const header = document.createElement('div');
    header.className = "flex justify-between items-center mb-6 px-2";

    const toggleBtn = `
        <button onclick="toggleAthkarMode()" 
            class="flex items-center gap-2 px-6 py-2 rounded-full border transition-all duration-300 transform active:scale-95 ${isMorning
            ? 'bg-amber-500/10 border-amber-500/50 text-amber-400 hover:bg-amber-500/20 shadow-[0_0_15px_rgba(245,158,11,0.2)]'
            : 'bg-indigo-500/10 border-indigo-500/50 text-indigo-400 hover:bg-indigo-500/20 shadow-[0_0_15px_rgba(99,102,241,0.2)]'}">
            <i data-lucide="${isMorning ? 'sun' : 'moon'}" class="w-5 h-5"></i>
            <span class="text-sm font-bold font-arabic">${isMorning ? t.morningAthkar : t.eveningAthkar}</span>
        </button>
    `;

    const resetBtn = `
        <button onclick="resetAthkar()" class="flex items-center gap-2 text-xs text-slate-400 hover:text-white transition-colors opacity-70 hover:opacity-100">
            <i data-lucide="rotate-ccw" class="w-3 h-3"></i>
            ${t.resetCounts}
        </button>
    `;

    header.innerHTML = toggleBtn + resetBtn;
    list.appendChild(header);

    const currentAthkarList = state.athkarMode === 'morning' ? ATHKAR_MORNING : ATHKAR_EVENING;

    currentAthkarList.forEach(thikr => {
        const count = state.athkarCounts[thikr.id] || 0;
        const isCompleted = count >= thikr.count;
        const progress = (count / thikr.count) * 100;

        const el = document.createElement('div');
        el.className = `relative overflow-hidden rounded-3xl transition-all duration-300 border ${isCompleted ? 'border-emerald-500/30 bg-emerald-900/10' : `${theme.border} ${theme.bg}`} ${isCompleted ? 'opacity-80' : 'opacity-100'}`;

        // Progress Bar
        const progressStyle = `
            <div class="absolute bottom-0 left-0 h-1.5 transition-all duration-300 ${isCompleted ? 'bg-emerald-500' : theme.progress}" style="width: ${progress}%"></div>
        `;

        el.innerHTML = `
            <div class="p-6 pb-8 flex flex-col items-center gap-4 text-center relative z-10">
                 <!-- Status Icon -->
                ${isCompleted ?
                `<div class="absolute top-4 right-4 text-emerald-500 animate-in fade-in zoom-in duration-300 bg-emerald-500/10 p-1.5 rounded-full">
                        <i data-lucide="check" class="w-5 h-5"></i>
                    </div>`
                : ''}

                <!-- Text -->
                <p class="text-xl md:text-3xl font-athkar leading-[2.5] ${isCompleted ? 'text-emerald-100' : theme.text} drop-shadow-sm">
                    ${thikr.text.replace(/\n/g, '<br>')}
                </p>
                
                ${thikr.note ? `<p class="text-xs ${theme.subtext} font-arabic bg-black/20 px-3 py-1 rounded-full">${thikr.note}</p>` : ''}
                
                <!-- Interaction Area -->
                <div class="mt-4 w-full max-w-xs">
                    <button onclick="event.stopPropagation(); incrementAthkar(${thikr.id})" 
                        class="w-full relative group h-14 rounded-2xl font-bold text-lg shadow-lg overflow-hidden transition-all duration-200 active:scale-95 ${isCompleted ? 'bg-emerald-600 text-white cursor-default' : theme.btn}">
                        
                        <span class="relative z-10 flex items-center justify-center gap-2">
                             ${isCompleted ? '<i data-lucide="check-circle" class="w-5 h-5"></i> Completed' :
                `<i data-lucide="fingerprint" class="w-5 h-5"></i> ${count} / ${thikr.count}`}
                        </span>

                        ${!isCompleted ? `<div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>` : ''}
                    </button>
                    ${!isCompleted ? `<p class="text-[10px] text-center mt-2 opacity-50 uppercase tracking-widest">${t.repetitions}</p>` : ''}
                </div>
            </div>
            ${progressStyle}
        `;
        list.appendChild(el);
    });
    lucide.createIcons();
}

// --- Tasbih Logic ---

function renderTasbih(list) {
    if (!list) list = document.getElementById('todo-list');
    list.innerHTML = '';
    list.className = "grid grid-cols-1 md:grid-cols-2 gap-4 pb-32";

    // Hide Athkar Controls
    const athkarControls = document.getElementById('athkar-controls');
    if (athkarControls) athkarControls.style.display = 'none';

    // Ensure counts init
    if (!state.tasbihCounts) state.tasbihCounts = {};

    TASBIH_DATA.forEach(item => {
        const count = state.tasbihCounts[item.id] || 0;
        const progress = Math.min((count / item.count) * 100, 100);
        const isCompleted = count >= item.count;
        const theme = CATEGORIES[state.selectedCategory];

        const el = document.createElement('div');
        // Comfortable "Night" Tasbih Theme
        // Deep Slate/Emerald Mix, very dark and matte to reduce eye strain
        const baseStyle = 'relative overflow-hidden rounded-3xl transition-all duration-300 border border-emerald-500/10 bg-gradient-to-br from-[#0f172a] to-[#064e3b] shadow-xl hover:shadow-emerald-900/20';
        const completedStyle = 'border-white/5 bg-[#0f172a] opacity-50 grayscale-[0.8]';

        el.className = `${isCompleted ? completedStyle : baseStyle}`;

        const progressStyle = `
            <div class="absolute bottom-0 left-0 h-1 transition-all duration-300 ${isCompleted ? 'bg-emerald-600' : 'bg-emerald-500/40'}" style="width: ${progress}%"></div>
        `;

        el.innerHTML = `
            <div class="p-6 pb-8 flex flex-col items-center gap-4 text-center relative z-10">
                ${isCompleted ?
                `<div class="absolute top-4 right-4 text-emerald-500/60 bg-emerald-500/5 p-1.5 rounded-full">
                        <i data-lucide="check" class="w-5 h-5"></i>
                    </div>`
                : ''}

                <!-- Text -->
                <p class="text-xl md:text-3xl font-athkar leading-[2.6] ${isCompleted ? 'text-slate-500' : 'text-[#ecfdf5]'} drop-shadow-md">
                    ${item.text.replace(/\n/g, '<br>')}
                </p>
                
                ${item.note ? `<p class="text-xs text-emerald-200/60 font-arabic bg-black/30 px-3 py-1.5 rounded-full leading-normal">${item.note}</p>` : ''}
                
                <!-- Interaction Area -->
                <div class="mt-6 w-full max-w-xs">
                    <button onclick="event.stopPropagation(); incrementTasbih(${item.id})" 
                        class="w-full relative group h-14 rounded-2xl font-bold text-lg shadow-lg overflow-hidden transition-all duration-200 active:scale-95 ${isCompleted ? 'bg-slate-800 text-slate-500 cursor-default' : 'bg-[#059669] hover:bg-[#047857] text-white shadow-emerald-900/30'}">
                        
                        <span class="relative z-10 flex items-center justify-center gap-2">
                             ${isCompleted ? '<i data-lucide="check-circle" class="w-5 h-5"></i> Finished' :
                `<i data-lucide="fingerprint" class="w-5 h-5"></i> ${count} / ${item.count}`}
                        </span>

                        ${!isCompleted ? `<div class="absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>` : ''}
                    </button>
                </div>
            </div>
            ${progressStyle}
        `;
        list.appendChild(el);
    });
    lucide.createIcons();
    lucide.createIcons();
}

function renderKahf(list) {
    if (!list) list = document.getElementById('todo-list');
    list.innerHTML = '';
    list.className = "w-full pb-32"; // Full width for reading

    // Hide Athkar Controls
    const athkarControls = document.getElementById('athkar-controls');
    if (athkarControls) athkarControls.style.display = 'none';

    const el = document.createElement('div');
    // Comfortable "Night Reading" Theme for Al-Kahf
    // Deep warm slate/stone background, very subtle amber border
    el.className = `relative overflow-hidden rounded-3xl p-6 md:p-12 transition-all duration-300 border border-amber-500/10 bg-gradient-to-br from-[#1e293b] via-[#0f172a] to-[#1c1917] shadow-2xl`;

    el.innerHTML = `
        <div class="relative z-10 flex flex-col gap-8 text-center">
            <!-- Header -->
            <div class="flex flex-col items-center gap-4">
                 <div class="w-16 h-16 rounded-full bg-amber-500/10 flex items-center justify-center border border-amber-500/20 shadow-[0_0_30px_rgba(245,158,11,0.1)]">
                    <span class="text-3xl filter drop-shadow-lg">📖</span>
                 </div>
                 <h2 class="text-4xl md:text-6xl font-bold text-amber-50 font-quran drop-shadow-md">سورة الكهف</h2>
                 
                 <!-- Hadith -->
                 <p class="text-lg md:text-2xl text-amber-200/90 font-quran mt-2 max-w-2xl leading-loose drop-shadow-sm" dir="rtl">
                    "مَنْ قَرَأَ سُورَةَ الْكَهْفِ فِي يَوْمِ الْجُمُعَةِ أَضَاءَ لَهُ مِنَ النُّورِ مَا بَيْنَ الْجُمُعَتَيْنِ"
                 </p>

                 <div class="h-px w-32 bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"></div>
            </div>

            <!-- Quran Text -->
            <!-- Using moderate leading (2.2) for tighter but clear look -->
            <div class="text-2xl md:text-4xl font-quran leading-[2.5] tracking-wide text-justify text-[#fef3c7] whitespace-pre-wrap px-2 md:px-6 relative z-10" dir="rtl" style="text-shadow: 0 2px 10px rgba(0,0,0,0.5); line-height: 2.2;">
                ${KAHF_TEXT}
            </div>

            <!-- Footer Note -->
            <div class="mt-12 pt-8 border-t border-amber-500/10">
                <p class="text-sm md:text-base text-amber-500/60 font-athkar">
                    لا تنسنا من دعوة صالحة بظهر الغيب
                </p>
                <div class="mt-2 text-xs text-slate-600 font-sans opacity-50">
                    B-Task 🚀
                </div>
            </div>
        </div>
        
        <!-- Subtle Ambient Lighting -->
        <div class="absolute top-0 left-1/2 w-full max-w-lg h-64 bg-amber-500/5 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-indigo-900/10 rounded-full blur-[120px] translate-y-1/3 pointer-events-none"></div>
    `;

    list.appendChild(el);
}

window.incrementTasbih = (id) => {
    if (!state.tasbihCounts) state.tasbihCounts = {};
    const item = TASBIH_DATA.find(i => i.id === id);
    if (!item) return;

    const current = state.tasbihCounts[id] || 0;
    if (current < item.count) {
        state.tasbihCounts[id] = current + 1;
        saveLocalData();
        renderTasbih();
        triggerConfetti(document.activeElement);
    }
};
// --- Stats, Timer, Emojis (Preserved & Adapted) ---

function initEmojis() {
    const container = document.getElementById('emoji-container');
    if (!container) return;
    container.innerHTML = ''; // Start fresh
    for (let i = 0; i < 15; i++) {
        const el = document.createElement('div');
        el.className = 'emoji-float';
        el.innerText = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
        el.style.left = Math.random() * 100 + '%';
        el.style.animationDuration = (15 + Math.random() * 15) + 's';
        el.style.animationDelay = (Math.random() * 5) + 's';
        el.style.fontSize = (20 + Math.random() * 20) + 'px';
        container.appendChild(el);
    }
}

function initMoodSelector() {
    const container = document.getElementById('mood-selector');
    container.innerHTML = '';
    const t = TRANSLATIONS[state.language];

    // Map internal key to translation key
    const moodLabels = {
        'High Energy': t.moodHigh,
        'Neutral': t.moodNeutral,
        'Low Energy': t.moodLow
    };

    Object.keys(MOODS).forEach(mood => {
        const btn = document.createElement('button');
        btn.dataset.mood = mood;
        btn.onclick = () => setMood(mood);
        const config = MOODS[mood];
        btn.innerHTML = `<i data-lucide="${config.icon}" class="w-4 h-4 ${config.theme}"></i> ${moodLabels[mood] || mood}`;
        container.appendChild(btn);
    });
}

function initCategoryDock() {
    const dock = document.getElementById('category-dock');
    dock.innerHTML = '';
    const t = TRANSLATIONS[state.language];

    // Safety: Reset selected if invalid
    if (!CATEGORIES[state.selectedCategory]) {
        state.selectedCategory = 'Personal';
    }

    Object.keys(CATEGORIES).forEach(cat => {
        const btn = document.createElement('button');
        const isActive = state.selectedCategory === cat;
        const baseClass = "px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-2";
        const activeClass = isActive
            ? `bg-white/20 text-white scale-105 shadow-lg border border-white/20`
            : `hover:bg-white/10 text-slate-400 hover:text-white`;

        btn.className = `${baseClass} ${activeClass}`;
        const dotBg = CATEGORIES[cat].bg;

        // Use translation or fallback to English key
        const label = t[cat] || cat;

        btn.innerHTML = `<span class="w-2 h-2 rounded-full ${dotBg}"></span> ${label}`;
        btn.onclick = () => setCategory(cat);
        dock.appendChild(btn);
    });
}

// Stats Chart
let chartInstances = {};
function updateStats() {
    const completed = state.todos.filter(t => t.completed);
    document.getElementById('stat-completed').innerText = completed.length;
    document.getElementById('stat-xp').innerText = (completed.length * 100) + ' XP';

    // Rate
    const total = state.todos.length;
    const rate = total === 0 ? 0 : Math.round((completed.length / total) * 100);
    document.getElementById('stat-rate').innerText = rate + '%';

    const catCounts = { Personal: 0, Work: 0, Learning: 0, Shopping: 0, Health: 0, Ideas: 0 };
    completed.forEach(t => { if (catCounts[t.category] !== undefined) catCounts[t.category]++; });

    if (typeof Chart === 'undefined') return;

    const barCtx = document.getElementById('barChart').getContext('2d');
    if (chartInstances.bar) chartInstances.bar.destroy();

    chartInstances.bar = new Chart(barCtx, {
        type: 'bar',
        data: {
            labels: Object.keys(catCounts).map(k => TRANSLATIONS[state.language][k] || k), // Translate labels
            datasets: [{
                label: 'Tasks',
                data: Object.values(catCounts),
                backgroundColor: ['#ec4899', '#0ea5e9', '#8b5cf6', '#14b8a6', '#22c55e', '#f59e0b'],
                borderRadius: 4
            }]
        },
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } }, x: { grid: { display: false } } } }
    });

    // Line chart mock
    const lineCtx = document.getElementById('lineChart').getContext('2d');
    if (chartInstances.line) chartInstances.line.destroy();
    chartInstances.line = new Chart(lineCtx, {
        type: 'line',
        data: {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Today'],
            datasets: [{ label: 'Productivity', data: [1, 2, 1, 3, 4, completed.length], borderColor: '#a855f7', tension: 0.4 }]
        },
        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { grid: { color: 'rgba(255,255,255,0.1)' } }, x: { grid: { display: false } } } }
    });
}

// Timer Exports
window.openTimer = (todoId) => {
    const todo = state.todos.find(t => t.id === todoId);
    if (!todo) return;
    state.timer.active = false; state.timer.timeLeft = 1500; state.timer.taskId = todoId;
    if (state.timer.interval) clearInterval(state.timer.interval);
    document.getElementById('timer-modal').classList.remove('hidden');
    document.getElementById('timer-task-text').innerText = todo.text;
    document.getElementById('timer-quote').innerText = getClientEncouragement(todo.text, state.currentMood);
    updateTimerDisplay();
}
window.closeTimer = () => {
    state.timer.active = false;
    if (state.timer.interval) clearInterval(state.timer.interval);
    document.getElementById('timer-modal').classList.add('hidden');
}
window.toggleTimerState = () => {
    state.timer.active = !state.timer.active;
    const btn = document.getElementById('timer-toggle-btn');
    if (state.timer.active) {
        btn.innerHTML = '<i data-lucide="pause" class="w-8 h-8 fill-current"></i>';
        lucide.createIcons();
        state.timer.interval = setInterval(() => {
            if (state.timer.timeLeft > 0) { state.timer.timeLeft--; updateTimerDisplay(); }
            else { clearInterval(state.timer.interval); state.timer.active = false; btn.innerHTML = '<i data-lucide="play" class="w-8 h-8 fill-current translate-x-1"></i>'; lucide.createIcons(); }
        }, 1000);
    } else {
        clearInterval(state.timer.interval);
        btn.innerHTML = '<i data-lucide="play" class="w-8 h-8 fill-current translate-x-1"></i>';
        lucide.createIcons();
    }
}

function updateTimerDisplay() {
    const m = Math.floor(state.timer.timeLeft / 60).toString().padStart(2, '0');
    const s = (state.timer.timeLeft % 60).toString().padStart(2, '0');
    document.getElementById('timer-display').innerText = `${m}:${s}`;
    const total = 1500;
    const progress = 1 - (state.timer.timeLeft / total);
    const ring = document.getElementById('timer-progress-ring');
    const circumference = 2 * Math.PI * 120;
    ring.style.strokeDashoffset = circumference * (1 - progress);
}

function getClientEncouragement(task, mood) {
    const msgs = ["You got this! 🎯", "Keep crushing it! 🚀", "Laser focus mode! ⚡"];
    const t = TRANSLATIONS[state.language];
    if (mood === 'Low Energy') return "Small steps. Breathe. 🌿";
    return msgs[Math.floor(Math.random() * msgs.length)];
}
